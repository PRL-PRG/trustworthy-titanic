## ---- message = FALSE------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
library(tidyverse)


## ---- collapse = TRUE------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
train <- read_csv("../input/train.csv")
test <- read_csv("../input/test.csv")


## ---- collapse = TRUE------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
str(train)


## ---- collapse = TRUE------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
str(test)


## ---- collapse = TRUE------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

names(train) <- tolower(names(train))

names(test) <- tolower(names(test))



## --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

train %>%

    select(sex, survived) %>%

    mutate(survived = recode(as.character(survived), "0" = "No", "1" = "Yes")) %>%

    group_by(sex, survived) %>%

    summarize(num_obs = n()) %>%

    group_by(sex) %>%

    mutate(freq = num_obs/ sum(num_obs)) %>%

    kable(align = 'c')

    

train %>%

    select(sex, survived) %>%

    mutate(survived = recode(as.character(survived), "0" = "No", "1" = "Yes"))  %>%

    unite(group, survived, sex, sep = "-") %>%

    count(group) %>%

    mutate(by_gender = stringr::str_detect(group, "female")) %>%

    group_by(by_gender) %>%

    mutate(freq = n / sum(n))


