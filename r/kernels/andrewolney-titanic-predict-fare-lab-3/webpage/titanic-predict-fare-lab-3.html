<!DOCTYPE html>
<html lang="en">
<head>
    <title>Titanic Predict Fare - Lab 3 | Kaggle</title>
    <meta charset="utf-8" />
    <meta name="robots" content="index, follow" />
    <meta name="turbolinks-cache-control" content="no-cache" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">    <meta name="theme-color" content="#008ABC" />
    <script type="text/javascript">
        window["initialPageLoadStartTime"] = new Date().getTime();
    </script>
    <link rel="dns-prefetch" href="https://www.google-analytics.com" /><link rel="dns-prefetch" href="https://stats.g.doubleclick.net" /><link rel="dns-prefetch" href="https://js.intercomcdn.com" /><link rel="dns-prefetch" href="https://storage.googleapis.com/" />
    <link href="/static/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="manifest" href="/static/json/manifest.json">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic" rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type='text/css'/>
        <link rel="canonical" href="/andrewolney/titanic-predict-fare-lab-3" />                    <link rel="stylesheet" type="text/css" href="/static/assets/vendor.css?v=632d145d8598" />
        <link rel="stylesheet" type="text/css" href="/static/assets/app.css?v=9626e4919bfe" />
    
    
 
        <script>
        try{(function(a,s,y,n,c,h,i,d,e){d=s.createElement("style");
        d.appendChild(s.createTextNode(""));s.head.appendChild(d);d=d.sheet;
        y=y.map(x => d.insertRule(x + "{ opacity: 0 !important }"));
        h.start=1*new Date;h.end=i=function(){y.forEach(x => d.deleteRule(x))};
        (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
        })(window,document,['.site-header-react__nav'],'dataLayer',2000,{'GTM-52LNT9S':true});}catch{}
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-12629138-1', {
            'optimize_id': 'GTM-52LNT9S',
            'displayFeaturesTask': null,
            'send_page_view': false
        });
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12629138-1"></script>

    
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq("set", "autoConfig", "false", "136809193586742");
    fbq('init', '136809193586742'); 
    fbq('track', 'PageView');
</script>
<noscript>
    <img height="1" width="1" src="https://www.facebook.com/tr?id=136809193586742&ev=PageView&noscript=1"/>
</noscript>

<script>window.intercomSettings = {"app_id":"koj6gxx6"};</script>        <script>(function () { var w = window; var ic = w.Intercom; if (typeof ic === "function") { ic('reattach_activator'); ic('update', intercomSettings); } else { var d = document; var i = function () { i.c(arguments) }; i.q = []; i.c = function (args) { i.q.push(args) }; w.Intercom = i; function l() { var s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://widget.intercom.io/widget/koj6gxx6'; var x = d.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); } if (w.attachEvent) { w.attachEvent('onload', l); } else { w.addEventListener('load', l, false); } } })()</script>
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@kaggledatasets" />
    <meta name="og:url" content="https://kaggle.com/andrewolney/titanic-predict-fare-lab-3" />
    <meta name="og:title" content="Titanic Predict Fare - Lab 3" />
    <meta name="og:description" content="Using data from Titanic Predict Fare" />
    <meta name="og:image" content="https://storage.googleapis.com/kaggle-avatars/thumbnails/150424-gp.jpg" />


    
    

    
    
    
<script type="text/javascript">
    var Kaggle = Kaggle || {};

    Kaggle.Current = {
        antiForgeryToken: 'CfDJ8LdUzqlsSWBPr4Ce3rb9VL-iLcpa4GtRf-CLwudxtQTjjmNeAzAtiKmquz32k-CuXgviH-xC4m9PoBM5bkTQ3JlBLIbkCU_PJz2Hwp-43j3hbjYJwQfVpK1p4umvrCxPry-I84-idutVA6s8CsDK3wQ',
        isAnonymous: true,
        analyticsToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAxOTU3NTYsIlVzZXJJZCI6MH0.y32vP73mtG9cb88Hh4BCWry2Rpppqg2VvJPlYs-uuVw',
        analyticsTokenExpiry: 15,
        internetKernelsEnabled: false,
        
        
        
        
        
        
        
        
        
        
        
    }
        Kaggle.Current.log = function(){};
        Kaggle.Current.warn = function(){};

    var decodeUserDisplayName = function () {
        var escapedUserDisplayName = Kaggle.Current.userDisplayNameEscaped || "";
        try {
            var textVersion = new DOMParser().parseFromString(escapedUserDisplayName, "text/html").documentElement.textContent;
            if (textVersion) {
                return textVersion;
            }
        } catch(ex) {}
        return escapedUserDisplayName;
    }
    Kaggle.Current.userDisplayName = decodeUserDisplayName();
</script>

    

<script type="text/javascript">
    var Kaggle = Kaggle || {};
    Kaggle.PageMessages = [];
</script>

    
<script type="text/javascript">
/* <![CDATA[ */
goog_snippet_vars = function() {
    var w = window;
    w.google_conversion_id = 955616553;
    w.google_conversion_label = "QSjvCKDksHMQqZrWxwM";
    w.google_conversion_value = 0.00;
    w.google_conversion_currency = "USD";
    w.google_remarketing_only = false;
    w.google_conversion_language = "en";
    w.google_conversion_format = "3";
    w.google_conversion_color = "ffffff";
}
// DO NOT CHANGE THE CODE BELOW.
goog_report_conversion = function(url) {
    goog_snippet_vars();
    window.google_conversion_format = "3";
    var opt = new Object();
    opt.onload_callback = function() {
        if (typeof(url) != 'undefined') {
            window.location = url;
        }
    }
    var conv_handler = window['google_trackConversion'];
    if (typeof(conv_handler) == 'function') {
        conv_handler(opt);
    }
}
/* ]]> */
</script>
<script type="text/javascript"
src="//www.googleadservices.com/pagead/conversion_async.js">
</script>



        <script>window['useKaggleAnalytics'] = true;</script>

    <script src="/static/assets/vendor.js?v=4721d2c14786" data-turbolinks-track="reload"></script>
    <script src="/static/assets/app.js?v=1d32f39aa6aa" data-turbolinks-track="reload"></script>
        <script>
            (function() {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register("/static/assets/service-worker.js").then(function(reg) {
                        reg.onupdatefound = function() {
                            var installingWorker = reg.installing;
                            installingWorker.onstatechange = function() {
                                switch (installingWorker.state) {
                                case 'installed':
                                    if (navigator.serviceWorker.controller) {
                                        console.log('New or updated content is available.');
                                    } else {
                                        console.log('Content is now available offline!');
                                    }
                                    break;
                                case 'redundant':
                                    console.error('The installing service worker became redundant.');
                                    break;
                                }
                            };
                        };
                    }).catch(function(e) {
                      console.error('Error during service worker registration:', e);
                    });
                }
            })();
        </script>
    <script>
        function handleClientLoad() {
            try {
                gapi.load('client:auth2');
            } catch (e) {
                // In Opera, readystatechange is an unreliable detection of script load, causing
                // this function to be called before gapi exists on the window. The onload callback
                // is still called at the correct time, so the feature works as expected - it's
                // just generating noisy errors.
            }
        }
    </script>
    <script async defer src="https://apis.google.com/js/api.js"
            onload="this.googleApiOnLoad=function(){};handleClientLoad()"
            onreadystatechange="if (this.readyState === 'complete') this.googleApiOnLoad()">
    </script>
</head>
<body data-turbolinks="true">
    






<div class="site-layout">
        <div class="site-layout__header">
            <div data-component-name="SiteHeaderContainer" style="display: flex; flex-direction: column; flex: 1 0 auto;"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({});performance && performance.mark && performance.mark("SiteHeaderContainer.componentCouldBootstrap");</script>
        </div>

    <div class="site-layout__main-content">
        

<div data-component-name="KernelViewer" style="display: flex; flex-direction: column; flex: 1 0 auto;"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({"kernel":{"id":1997830,"title":"Titanic Predict Fare - Lab 3","forkParent":null,"currentRunId":7899851,"mostRecentRunId":7899851,"url":"/andrewolney/titanic-predict-fare-lab-3","tags":[],"commentCount":0,"upvoteCount":1,"viewCount":51,"forkCount":2,"bestPublicScore":null,"author":{"id":150424,"displayName":"Andrew Olney","email":null,"editedEmail":null,"editedEmailCode":null,"userName":"andrewolney","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/150424-gp.jpg","profileUrl":"/andrewolney","registerDate":"0001-01-01T00:00:00Z","lastVisitDate":"0001-01-01T00:00:00Z","statusId":0,"performanceTier":0,"userRoles":null,"userLogins":null,"groupIds":null,"duplicateUsers":null,"hasPhoneVerifications":false,"failedNerdchas":0,"hasPendingNerdcha":false,"deleteRequests":null,"userAttributes":null,"isAdmin":false,"isTvc":false,"isKaggleBot":false,"isAdminOrTvc":false,"isAnonymous":false,"canAct":false,"canBeSeen":false,"thumbnailName":null,"activationCode":"00000000-0000-0000-0000-000000000000","isPhoneVerified":false},"isPrivate":false,"updatedTime":"2018-11-29T16:40:33.2733333Z","selfLink":"/kernels/1997830","pinnedDockerImageVersionId":null,"isLanguageTemplate":false,"medal":null,"topicId":null,"readGroupId":null,"writeGroupId":null,"slug":"titanic-predict-fare-lab-3"},"kernelBlob":{"id":119953823,"settings":{"dockerImageVersionId":null,"dataSources":[{"sourceType":"Competition","sourceId":11300,"databundleVersionId":null}],"sourceType":"notebook","language":"r","isGpuEnabled":false,"isInternetEnabled":false},"source":"{\u0022cells\u0022:[{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022c346bb7e8ceed3f432b3661b665ab54a905bc020\u0022,\u0022_execution_state\u0022:\u0022idle\u0022,\u0022trusted\u0022:true},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022# Titanic Predict Fare\\n\\nThe purpose of this notebook is to predict how much Titanic passengers paid for their fares\\n\\n## Variable descriptions\\n\\n- (P)class: Passenger Class (1 = 1st; 2 = 2nd; 3 = 3rd)\\n- (s)urvival: Survival (0 = No; 1 = Yes)\\n- (n)ame: Name\\n- (s)ex: Sex\\n- (a)ge: Age\\n- (s)ibsp: Number of Siblings/Spouses Aboard\\n- (p)arch: Number of Parents/Children Aboard\\n- (t)icket: Ticket Number\\n- (f)are: Passenger Fare (British pound)\\n- (c)abin: Cabin\\n- (e)mbarked: Port of Embarkation (C = Cherbourg; Q = Queenstown; S = Southampton)\\n- (b)oat: Lifeboat\\n- (b)ody: Body Identification Number\\n- (h)ome.dest: Home/Destination\\n\\n### Notes\\n\\n- Pclass is a proxy for socio-economic status (SES) 1st ~ Upper; 2nd ~ Middle; 3rd ~ Lower\\n- Age is in Years; Fractional if Age less than One (1). If the Age is estimated, it is in the form xx.5\\n- Fare is in Pre-1970 British Pounds (). Conversion Factors: 1 = 12s = 240d and 1s = 20d\\n\\nWith respect to the family relation variables (i.e. sibsp and parch) some relations were ignored. The following are the definitions used for sibsp and parch.\\n\\n- Sibling: Brother, Sister, Stepbrother, or Stepsister of Passenger Aboard Titanic\\n- Spouse: Husband or Wife of Passenger Aboard Titanic (Mistresses and Fiances Ignored)\\n- Parent: Mother or Father of Passenger Aboard Titanic\\n- Child: Son, Daughter, Stepson, or Stepdaughter of Passenger Aboard Titanic\\n- Other family relatives excluded from this study include cousins, nephews/nieces, aunts/uncles, and in-laws. Some children traveled only with a nanny, therefore parch=0 for them. As well, some traveled with very close friends or neighbors in a village, however, the definitions do not support such relations.\\n\\n### Running code\\n\\n- In a notebook, you can run a single code cell by clicking in the cell and then hitting  the blue arrow to the left, or by clicking in the cell and pressing Shift+Enter. In a script, you can run code by highlighting the code you want to run and then clicking the blue arrow at the bottom of this window.\\n\\n\\n## Install/Load Packages\\n\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022e8b961cd5ab787c20944cf04f6b4492855ed66f0\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022if(!require(\\\u0022pacman\\\u0022) ) install.packages(\\\u0022pacman\\\u0022)\\npacman::p_load(tidyverse,corrgram,faraway,metaSEM,mgcv)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022cd60fc2a7acaff8abbcc5a032baa8692aba5df14\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Load data\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022418bc9c64f485b56addc695871d246b8a9703760\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train \u003c- read_csv(\\n    \u0027../input/train.csv\u0027,\\n    col_types=cols(\\n        pclass = col_factor(NULL),\\n        survived = col_factor(NULL),\\n        sex = col_factor(NULL),\\n        ticket = col_factor(NULL),\\n        cabin = col_factor(NULL),\\n        embarked = col_factor(NULL),\\n        boat = col_factor(NULL),\\n        body = col_factor(NULL),\\n        home.dest = col_factor(NULL)\\n    )\\n)\\nproblems(train)\\nsummary(train)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022a7a516f05685a5cdf6a51dd954a6b56b844c186e\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Result\\n\\n- Lots of NAs!\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ca71d23f57494e9323662590459bafc63302ae4f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022test \u003c- read_csv(\\n    \u0027../input/test-fare.csv\u0027,\\n    col_types=cols(\\n        pclass = col_factor(NULL),\\n        survived = col_factor(NULL),\\n        sex = col_factor(NULL),\\n        ticket = col_factor(NULL),\\n        cabin = col_factor(NULL),\\n        embarked = col_factor(NULL),\\n        boat = col_factor(NULL),\\n        body = col_factor(NULL),\\n        home.dest = col_factor(NULL)\\n    )\\n)\\nproblems(test)\\nsummary(test)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00220362b7fe206ff2dcdf2d1e616918e845c991d4e8\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Relevel Data\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002275fa238b1bb3f27c7c594f811fd8e52a66958810\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#for debug\\nlapply(train,nlevels) %\u003e% as.data.frame\\n\\ntest$fare \u003c- NA\\nmerged = rbind(train,test)\\ntrain2 \u003c- as.data.frame(train)\\nfor( i in colnames(merged)){\\n    if( is.factor(merged[[i]])) {\\n        levels(train[[i]]) \u003c- levels(merged[[i]])\\n        levels(test[[i]]) \u003c- levels(merged[[i]])\\n    }\\n}\\n\\n#for debug\\nlapply(train,nlevels) %\u003e% as.data.frame\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00222019b2922e27faf37f10ba02f772ad81baac2cfb\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Visualize\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022a026e1b578a30a9b49f8b38f303770be18aeb3ca\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train.complete \u003c- na.omit(train)\\ntrain$log.fare \u003c- log(1+train$fare)\\ntrain$sqrt.fare \u003c- sqrt(train$fare)\\noptions(repr.plot.width=7, repr.plot.height=14)\\nop \u003c- par(no.readonly = TRUE)\\npar(mfrow = c(4,2))\\nhist(train$fare, main=\\\u0022Histogram of Fare\\\u0022)\\nboxplot(train$fare,main=\\\u0022Fare\\\u0022)\\nhist(train$log.fare, main=\\\u0022Histogram of Log Fare\\\u0022)\\nboxplot(train$log.fare,main=\\\u0022Log Fare\\\u0022)\\nhist(train$sqrt.fare, main=\\\u0022Histogram of Sqrt Fare\\\u0022)\\nboxplot(train$sqrt.fare,main=\\\u0022Sqrt Fare\\\u0022)\\ndotchart(train$fare,group=train$pclass, main=\\\u0022Fare by passenger class\\\u0022)\\nplot(train$pclass, train$sex, main=\\\u0022Fare by Age\\\u0022)\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022a6b2d11a1570b2727ac7657cb65631ad43661d56\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Looks like log transform is a good idea\\n- Pclass looks like a good predictor of fare\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00224bec82ab2c9a6fa8c3b26cc2a057eec4d406cb7a\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022# Correlations\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00226b9092c590fcbd2427a8f017ef17da77352f38b1\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022options(repr.plot.width=10,repr.plot.height=10)\\ncorrgram(train, order=TRUE, lower.panel=panel.pts,text.panel=panel.txt,upper.panel=panel.shade)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00225569a0b4ee1a9b45ffe4afca55b348912def978f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n\\n- Missing correlations due to NAs\\n- Log.fare has better correlations with parch and sibsp but worse with age\\n\\n### Force correlations even though NAs (potentially misleading)\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221865ad8c7bc00d355e632fd02a178eae762c2a93\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train.int \u003c- sapply(train[-3],as.integer) #drop name\\ncor(train.int, use=\\\u0022pairwise.complete.obs\\\u0022)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00226238ec190961aa2076373231b75d1f8040ca7881\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n\\n- More evidence of better correlations with log.fare\\n- Age might be worth imputing for missing values since it seems an OK predictor\\n\\n## Colinearity\\nWe use VIF to identify; goal is VIF \u003c 3.0. NOTE VIF on factors is dubious, so this isn\u0027t a perfect test\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002211dc5e88961434ac27f71f90f39bad906003453f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#colnames(train)\\ndm= data.matrix(train[c(\\\u0022pclass\\\u0022,\\\u0022survived\\\u0022,\\\u0022sex\\\u0022)]) #use columns of our model only\\nfaraway::vif(dm)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00225bae27e4c7225672ca45b5e8ba704db64f1666eb\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- VIF OK\\n- Could transform these factors to numeric and test again as another check (again, a flawed one)\\n\\n## Models\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00223b2d5b5f6daa2c13d4fe4ece0967ff0e62a6fb0c\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022lm1 \u003c- lm( log.fare ~ pclass + survived + sex, data=train)\\nsummary(lm1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022bad1cfe16825708a50573eb91dfbd7a139ad7728\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#Type 3 ANOVA in R\\ndrop1(lm1,.~.,test=\\\u0022F\\\u0022) #do single term deletions and calculate f-statistic p values from those\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00227805390bb5f5516893bbc04f394e695d02592e3d\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Log transform is good (in class we didn\u0027t use transform and $R^2$ was .38\\n- Survived is garbage. From a prediction standpoint, we should remove it\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022d71b631f126fb1b7a41fb9ceddb5fa3fa91cbaf5\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#Special syntax for dropping terms\\nlm1 \u003c- update(lm1, . ~ . -survived) \\nsummary(lm1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022c3de5da69ce603460223be887da8f267b455aff4\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Model Checking\\n\\n- Homogeneity\\n    - Plot standardized residuals against fitted\\n    - If spread is not even, then violated\\n    - Either transform outcome variable or use GLS\\n- Normality\\n    - Histogram of residuals\\n    - If non-normal, transformation may be needed\\n- Independence : plot residuals against each predictor\\n    - Use a different model to account for dependence\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00224582dd854b410c6378ef39eac3145841fb1881f5\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022op \u003c- par(mfrow = c(2,2))\\nplot(lm1)\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022c72351475ca99916cbd01d716c2b0a9dd9fb9bf8\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n\\n- Not too bad; definitely better than the non log transformed model in class\\n- Some extreme points are hurting the fit (off the QQ line)\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002265d57aacf0491045be003c078885b63b17f63dfe\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022e \u003c- rstandard(lm1)\\ndf \u003c- train #the lm excludes NA; so we must do so here as well\\nop \u003c- par(mfrow = c(2,2))\\nhist(e)\\nplot( e ~ df$pclass )\\nplot( e ~ df$sex )\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u002226fecabd5fe6d2547947597782fae9ff6e6f8f42\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- We see the same skew in the histogram\\n- First class has more variability than others, though again this is helped by log tranform of fare\\n\\n## Submit to leaderboard\\nNote you\u0027d need to reverse the log transform for prediction. I leave that as an exercise (hint: make sure the base is the same as what we used for the log)\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022043505e4de410ad27d9272c93fc772bdcd9917d6\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022predictions \u003c- predict(lm1, newdata=test)\\nhead( predictions )\\ntest \u003c- tibble::rowid_to_column(test, \\\u0022i\\\u0022)\\ndf.submission \u003c- tbl_df(data.frame(\u0027Id\u0027 = as.character(test$Id), \u0027Estimated\u0027 = as.character(predictions)) ) #disable scientific notation, which throws off scoring\\nwrite_csv( df.submission, \u0027submission.csv\u0027)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022af47902c62a5d7e67c2d5cbf0b179452b823dba0\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## GAM fun\\nMaybe pclass is nonlinear? Let\u0027s fit a spline.\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221bd8160aec8e9cbd08f81a421875deddd54ecaa7\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train$pclass.int = as.numeric(levels(train$pclass))[train$pclass]\\ngam1 \u003c- gam( log.fare ~ s(pclass.int,bs=\\\u0022cs\\\u0022,k=2)  + sex, data=train)\\nsummary(gam1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022293a1ec04ed45853c38062f65992b512b965ff4a\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Hmm, maybe, but not really better in terms of $R^2$\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022415bf8804e17e9e2d63e7b1750cb5fb307c614af\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022options(repr.plot.width=7, repr.plot.height=7)\\nplot.gam(gam1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022ad886acf007bbb19a8bbfdcd1df69c153b98999f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Nope, really looks like just a line\\n\\n### Diagnositics\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022f21592ac62aaeda0db436c639d086b3f031790a6\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022op \u003c- par(mfrow = c(2,2))\\ngam.check(gam1)\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022dfb83e9f759d84080e8e47a388ca93775e09499a\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Not really any improvement\\n\\n## Significance of spline\\nSince the two models are nested (we can set the spline to zero and then the two models are equivalent), we can do an anova test on the models to see if the spline is significant\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00226d90ddfcec89d9c089545b5b902862b04e6bfc23\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022anova(lm1,gam1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00228cab488be279915e37bfbaf30ade230dc18405b7\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- It was significant when the dependent was fare, but not significant when we used log.fare\\n- This appears to be a decent example of how using a log transformation helps keep you in a linear regression world, which you probably want to do rather than go to a more complicated model like GAM.\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022fe06eba97350cfd9661c604bc484739f6dc47259\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]}],\u0022metadata\u0022:{\u0022kernelspec\u0022:{\u0022display_name\u0022:\u0022R\u0022,\u0022language\u0022:\u0022R\u0022,\u0022name\u0022:\u0022ir\u0022},\u0022language_info\u0022:{\u0022mimetype\u0022:\u0022text/x-r-source\u0022,\u0022name\u0022:\u0022R\u0022,\u0022pygments_lexer\u0022:\u0022r\u0022,\u0022version\u0022:\u00223.4.2\u0022,\u0022file_extension\u0022:\u0022.r\u0022,\u0022codemirror_mode\u0022:\u0022r\u0022}},\u0022nbformat\u0022:4,\u0022nbformat_minor\u0022:1}","dateCreated":"2018-11-29T16:40:33.0682241Z"},"kernelRun":{"id":7899851,"kernelId":1997830,"status":"complete","type":"batch","sourceType":"notebook","language":"r","title":"Titanic Predict Fare - Lab 3","dateCreated":"2018-11-29T16:40:33.13Z","dateEvaluated":"2018-11-29T16:40:33.273Z","workerContainerPort":null,"workerUptimeSeconds":10401,"workerIPAddress":"172.16.29.163  ","scriptLanguageId":12,"scriptLanguageName":"R Notebook HTML","renderedOutputUrl":"https://www.kaggleusercontent.com/kf/7899851/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..7iNsnZFVcwxEnqoBU3Mdbg.ahhQ1tSY_PCnZnV4JO4LcKCA9jf--Ijh8G1rtjfssQcd1G5Eza2eGrEB4-3E7MTLvYr_-IceSJ1vbxd4s9qfBsoyCTCaRoLAvc97Wc8bcLJvknLVNrvx1vyd1ePWU-XFLTtVpffGMvW2JffEcmdE_g.-AYRDTA3HhdcsBcIiQnXLA/__results__.html","commit":{"id":119953823,"settings":{"dockerImageVersionId":null,"dataSources":[{"sourceType":"Competition","sourceId":11300,"databundleVersionId":null}],"sourceType":"notebook","language":"r","isGpuEnabled":false,"isInternetEnabled":false},"source":"{\u0022cells\u0022:[{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022c346bb7e8ceed3f432b3661b665ab54a905bc020\u0022,\u0022_execution_state\u0022:\u0022idle\u0022,\u0022trusted\u0022:true},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022# Titanic Predict Fare\\n\\nThe purpose of this notebook is to predict how much Titanic passengers paid for their fares\\n\\n## Variable descriptions\\n\\n- (P)class: Passenger Class (1 = 1st; 2 = 2nd; 3 = 3rd)\\n- (s)urvival: Survival (0 = No; 1 = Yes)\\n- (n)ame: Name\\n- (s)ex: Sex\\n- (a)ge: Age\\n- (s)ibsp: Number of Siblings/Spouses Aboard\\n- (p)arch: Number of Parents/Children Aboard\\n- (t)icket: Ticket Number\\n- (f)are: Passenger Fare (British pound)\\n- (c)abin: Cabin\\n- (e)mbarked: Port of Embarkation (C = Cherbourg; Q = Queenstown; S = Southampton)\\n- (b)oat: Lifeboat\\n- (b)ody: Body Identification Number\\n- (h)ome.dest: Home/Destination\\n\\n### Notes\\n\\n- Pclass is a proxy for socio-economic status (SES) 1st ~ Upper; 2nd ~ Middle; 3rd ~ Lower\\n- Age is in Years; Fractional if Age less than One (1). If the Age is estimated, it is in the form xx.5\\n- Fare is in Pre-1970 British Pounds (). Conversion Factors: 1 = 12s = 240d and 1s = 20d\\n\\nWith respect to the family relation variables (i.e. sibsp and parch) some relations were ignored. The following are the definitions used for sibsp and parch.\\n\\n- Sibling: Brother, Sister, Stepbrother, or Stepsister of Passenger Aboard Titanic\\n- Spouse: Husband or Wife of Passenger Aboard Titanic (Mistresses and Fiances Ignored)\\n- Parent: Mother or Father of Passenger Aboard Titanic\\n- Child: Son, Daughter, Stepson, or Stepdaughter of Passenger Aboard Titanic\\n- Other family relatives excluded from this study include cousins, nephews/nieces, aunts/uncles, and in-laws. Some children traveled only with a nanny, therefore parch=0 for them. As well, some traveled with very close friends or neighbors in a village, however, the definitions do not support such relations.\\n\\n### Running code\\n\\n- In a notebook, you can run a single code cell by clicking in the cell and then hitting  the blue arrow to the left, or by clicking in the cell and pressing Shift+Enter. In a script, you can run code by highlighting the code you want to run and then clicking the blue arrow at the bottom of this window.\\n\\n\\n## Install/Load Packages\\n\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022e8b961cd5ab787c20944cf04f6b4492855ed66f0\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022if(!require(\\\u0022pacman\\\u0022) ) install.packages(\\\u0022pacman\\\u0022)\\npacman::p_load(tidyverse,corrgram,faraway,metaSEM,mgcv)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022cd60fc2a7acaff8abbcc5a032baa8692aba5df14\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Load data\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022418bc9c64f485b56addc695871d246b8a9703760\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train \u003c- read_csv(\\n    \u0027../input/train.csv\u0027,\\n    col_types=cols(\\n        pclass = col_factor(NULL),\\n        survived = col_factor(NULL),\\n        sex = col_factor(NULL),\\n        ticket = col_factor(NULL),\\n        cabin = col_factor(NULL),\\n        embarked = col_factor(NULL),\\n        boat = col_factor(NULL),\\n        body = col_factor(NULL),\\n        home.dest = col_factor(NULL)\\n    )\\n)\\nproblems(train)\\nsummary(train)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022a7a516f05685a5cdf6a51dd954a6b56b844c186e\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Result\\n\\n- Lots of NAs!\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ca71d23f57494e9323662590459bafc63302ae4f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022test \u003c- read_csv(\\n    \u0027../input/test-fare.csv\u0027,\\n    col_types=cols(\\n        pclass = col_factor(NULL),\\n        survived = col_factor(NULL),\\n        sex = col_factor(NULL),\\n        ticket = col_factor(NULL),\\n        cabin = col_factor(NULL),\\n        embarked = col_factor(NULL),\\n        boat = col_factor(NULL),\\n        body = col_factor(NULL),\\n        home.dest = col_factor(NULL)\\n    )\\n)\\nproblems(test)\\nsummary(test)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00220362b7fe206ff2dcdf2d1e616918e845c991d4e8\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Relevel Data\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002275fa238b1bb3f27c7c594f811fd8e52a66958810\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#for debug\\nlapply(train,nlevels) %\u003e% as.data.frame\\n\\ntest$fare \u003c- NA\\nmerged = rbind(train,test)\\ntrain2 \u003c- as.data.frame(train)\\nfor( i in colnames(merged)){\\n    if( is.factor(merged[[i]])) {\\n        levels(train[[i]]) \u003c- levels(merged[[i]])\\n        levels(test[[i]]) \u003c- levels(merged[[i]])\\n    }\\n}\\n\\n#for debug\\nlapply(train,nlevels) %\u003e% as.data.frame\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00222019b2922e27faf37f10ba02f772ad81baac2cfb\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Visualize\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022a026e1b578a30a9b49f8b38f303770be18aeb3ca\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train.complete \u003c- na.omit(train)\\ntrain$log.fare \u003c- log(1+train$fare)\\ntrain$sqrt.fare \u003c- sqrt(train$fare)\\noptions(repr.plot.width=7, repr.plot.height=14)\\nop \u003c- par(no.readonly = TRUE)\\npar(mfrow = c(4,2))\\nhist(train$fare, main=\\\u0022Histogram of Fare\\\u0022)\\nboxplot(train$fare,main=\\\u0022Fare\\\u0022)\\nhist(train$log.fare, main=\\\u0022Histogram of Log Fare\\\u0022)\\nboxplot(train$log.fare,main=\\\u0022Log Fare\\\u0022)\\nhist(train$sqrt.fare, main=\\\u0022Histogram of Sqrt Fare\\\u0022)\\nboxplot(train$sqrt.fare,main=\\\u0022Sqrt Fare\\\u0022)\\ndotchart(train$fare,group=train$pclass, main=\\\u0022Fare by passenger class\\\u0022)\\nplot(train$pclass, train$sex, main=\\\u0022Fare by Age\\\u0022)\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022a6b2d11a1570b2727ac7657cb65631ad43661d56\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Looks like log transform is a good idea\\n- Pclass looks like a good predictor of fare\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00224bec82ab2c9a6fa8c3b26cc2a057eec4d406cb7a\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022# Correlations\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00226b9092c590fcbd2427a8f017ef17da77352f38b1\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022options(repr.plot.width=10,repr.plot.height=10)\\ncorrgram(train, order=TRUE, lower.panel=panel.pts,text.panel=panel.txt,upper.panel=panel.shade)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00225569a0b4ee1a9b45ffe4afca55b348912def978f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n\\n- Missing correlations due to NAs\\n- Log.fare has better correlations with parch and sibsp but worse with age\\n\\n### Force correlations even though NAs (potentially misleading)\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221865ad8c7bc00d355e632fd02a178eae762c2a93\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train.int \u003c- sapply(train[-3],as.integer) #drop name\\ncor(train.int, use=\\\u0022pairwise.complete.obs\\\u0022)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00226238ec190961aa2076373231b75d1f8040ca7881\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n\\n- More evidence of better correlations with log.fare\\n- Age might be worth imputing for missing values since it seems an OK predictor\\n\\n## Colinearity\\nWe use VIF to identify; goal is VIF \u003c 3.0. NOTE VIF on factors is dubious, so this isn\u0027t a perfect test\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002211dc5e88961434ac27f71f90f39bad906003453f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#colnames(train)\\ndm= data.matrix(train[c(\\\u0022pclass\\\u0022,\\\u0022survived\\\u0022,\\\u0022sex\\\u0022)]) #use columns of our model only\\nfaraway::vif(dm)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00225bae27e4c7225672ca45b5e8ba704db64f1666eb\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- VIF OK\\n- Could transform these factors to numeric and test again as another check (again, a flawed one)\\n\\n## Models\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00223b2d5b5f6daa2c13d4fe4ece0967ff0e62a6fb0c\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022lm1 \u003c- lm( log.fare ~ pclass + survived + sex, data=train)\\nsummary(lm1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022bad1cfe16825708a50573eb91dfbd7a139ad7728\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#Type 3 ANOVA in R\\ndrop1(lm1,.~.,test=\\\u0022F\\\u0022) #do single term deletions and calculate f-statistic p values from those\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00227805390bb5f5516893bbc04f394e695d02592e3d\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Log transform is good (in class we didn\u0027t use transform and $R^2$ was .38\\n- Survived is garbage. From a prediction standpoint, we should remove it\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022d71b631f126fb1b7a41fb9ceddb5fa3fa91cbaf5\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#Special syntax for dropping terms\\nlm1 \u003c- update(lm1, . ~ . -survived) \\nsummary(lm1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022c3de5da69ce603460223be887da8f267b455aff4\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Model Checking\\n\\n- Homogeneity\\n    - Plot standardized residuals against fitted\\n    - If spread is not even, then violated\\n    - Either transform outcome variable or use GLS\\n- Normality\\n    - Histogram of residuals\\n    - If non-normal, transformation may be needed\\n- Independence : plot residuals against each predictor\\n    - Use a different model to account for dependence\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00224582dd854b410c6378ef39eac3145841fb1881f5\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022op \u003c- par(mfrow = c(2,2))\\nplot(lm1)\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022c72351475ca99916cbd01d716c2b0a9dd9fb9bf8\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n\\n- Not too bad; definitely better than the non log transformed model in class\\n- Some extreme points are hurting the fit (off the QQ line)\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002265d57aacf0491045be003c078885b63b17f63dfe\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022e \u003c- rstandard(lm1)\\ndf \u003c- train #the lm excludes NA; so we must do so here as well\\nop \u003c- par(mfrow = c(2,2))\\nhist(e)\\nplot( e ~ df$pclass )\\nplot( e ~ df$sex )\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u002226fecabd5fe6d2547947597782fae9ff6e6f8f42\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- We see the same skew in the histogram\\n- First class has more variability than others, though again this is helped by log tranform of fare\\n\\n## Submit to leaderboard\\nNote you\u0027d need to reverse the log transform for prediction. I leave that as an exercise (hint: make sure the base is the same as what we used for the log)\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022043505e4de410ad27d9272c93fc772bdcd9917d6\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022predictions \u003c- predict(lm1, newdata=test)\\nhead( predictions )\\ntest \u003c- tibble::rowid_to_column(test, \\\u0022i\\\u0022)\\ndf.submission \u003c- tbl_df(data.frame(\u0027Id\u0027 = as.character(test$Id), \u0027Estimated\u0027 = as.character(predictions)) ) #disable scientific notation, which throws off scoring\\nwrite_csv( df.submission, \u0027submission.csv\u0027)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022af47902c62a5d7e67c2d5cbf0b179452b823dba0\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## GAM fun\\nMaybe pclass is nonlinear? Let\u0027s fit a spline.\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221bd8160aec8e9cbd08f81a421875deddd54ecaa7\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022train$pclass.int = as.numeric(levels(train$pclass))[train$pclass]\\ngam1 \u003c- gam( log.fare ~ s(pclass.int,bs=\\\u0022cs\\\u0022,k=2)  + sex, data=train)\\nsummary(gam1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022293a1ec04ed45853c38062f65992b512b965ff4a\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Hmm, maybe, but not really better in terms of $R^2$\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022415bf8804e17e9e2d63e7b1750cb5fb307c614af\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022options(repr.plot.width=7, repr.plot.height=7)\\nplot.gam(gam1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022ad886acf007bbb19a8bbfdcd1df69c153b98999f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Nope, really looks like just a line\\n\\n### Diagnositics\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022f21592ac62aaeda0db436c639d086b3f031790a6\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022op \u003c- par(mfrow = c(2,2))\\ngam.check(gam1)\\npar(op)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022dfb83e9f759d84080e8e47a388ca93775e09499a\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- Not really any improvement\\n\\n## Significance of spline\\nSince the two models are nested (we can set the spline to zero and then the two models are equivalent), we can do an anova test on the models to see if the spline is significant\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00226d90ddfcec89d9c089545b5b902862b04e6bfc23\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022anova(lm1,gam1)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00228cab488be279915e37bfbaf30ade230dc18405b7\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## RESULT\\n- It was significant when the dependent was fare, but not significant when we used log.fare\\n- This appears to be a decent example of how using a log transformation helps keep you in a linear regression world, which you probably want to do rather than go to a more complicated model like GAM.\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022fe06eba97350cfd9661c604bc484739f6dc47259\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]}],\u0022metadata\u0022:{\u0022kernelspec\u0022:{\u0022display_name\u0022:\u0022R\u0022,\u0022language\u0022:\u0022R\u0022,\u0022name\u0022:\u0022ir\u0022},\u0022language_info\u0022:{\u0022mimetype\u0022:\u0022text/x-r-source\u0022,\u0022name\u0022:\u0022R\u0022,\u0022pygments_lexer\u0022:\u0022r\u0022,\u0022version\u0022:\u00223.4.2\u0022,\u0022file_extension\u0022:\u0022.r\u0022,\u0022codemirror_mode\u0022:\u0022r\u0022}},\u0022nbformat\u0022:4,\u0022nbformat_minor\u0022:1}","dateCreated":"2018-11-29T16:40:33.0682241Z"},"resources":null,"isolatorResults":"\u003cresults\u003e\u003cdisk_kb_free\u003e4821496\u003c/disk_kb_free\u003e\u003cdocker_image_digest\u003e7f63df4b335de7de7c4d7fbccbdb42ba03ca55ffce0e71990d11c38cd928e2da\u003c/docker_image_digest\u003e\u003cdocker_image_id\u003esha256:04d80efacc9fe06ec24a96f495a47ff7f579e927b8341e9c94a9b987ebc020c2\u003c/docker_image_id\u003e\u003cdocker_image_name\u003egcr.io/kaggle-images/rstats\u003c/docker_image_name\u003e\u003cexit_code\u003e0\u003c/exit_code\u003e\u003cfailure_message /\u003e\u003cinvalid_path_errors\u003eFalse\u003c/invalid_path_errors\u003e\u003cout_of_memory\u003eFalse\u003c/out_of_memory\u003e\u003crun_time_seconds\u003e14.2874755310004\u003c/run_time_seconds\u003e\u003csucceeded\u003eTrue\u003c/succeeded\u003e\u003ctimeout_exceeded\u003eFalse\u003c/timeout_exceeded\u003e\u003cused_all_space\u003eFalse\u003c/used_all_space\u003e\u003cwas_killed\u003eFalse\u003c/was_killed\u003e\u003c/results\u003e","runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageDigest":"7f63df4b335de7de7c4d7fbccbdb42ba03ca55ffce0e71990d11c38cd928e2da","dockerImageId":"sha256:04d80efacc9fe06ec24a96f495a47ff7f579e927b8341e9c94a9b987ebc020c2","dockerImageName":"kaggle/rstats","diskKbFree":4821496,"failureMessage":"","exitCode":0,"queuedSeconds":0,"outputSizeBytes":0,"runTimeSeconds":14.2874755310004,"usedAllSpace":false,"timeoutExceeded":false,"isValidStatus":false,"wasGpuEnabled":false,"wasInternetEnabled":false,"outOfMemory":false,"invalidPathErrors":false,"succeeded":true,"wasKilled":false},"outputFilesTotalSizeBytes":1021075,"dockerImageVersionId":11754,"usedCustomDockerImage":false},"author":{"id":150424,"displayName":"Andrew Olney","email":null,"editedEmail":null,"editedEmailCode":null,"userName":"andrewolney","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/150424-gp.jpg","profileUrl":"/andrewolney","registerDate":"0001-01-01T00:00:00Z","lastVisitDate":"0001-01-01T00:00:00Z","statusId":0,"performanceTier":0,"userRoles":null,"userLogins":null,"groupIds":null,"duplicateUsers":null,"hasPhoneVerifications":false,"failedNerdchas":0,"hasPendingNerdcha":false,"deleteRequests":null,"userAttributes":null,"isAdmin":false,"isTvc":false,"isKaggleBot":false,"isAdminOrTvc":false,"isAnonymous":false,"canAct":false,"canBeSeen":false,"thumbnailName":null,"activationCode":"00000000-0000-0000-0000-000000000000","isPhoneVerified":false},"baseUrl":"/andrewolney/titanic-predict-fare-lab-3","collaborators":{"owner":{"userId":150424,"groupId":null,"groupMemberCount":null,"profileUrl":"/andrewolney","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/150424-gp.jpg","name":"Andrew Olney","slug":"andrewolney","userTier":0,"joinDate":null,"type":"owner","isUser":true,"isGroup":false},"collaborators":[]},"initialTab":null,"log":"[{\n  \u0022data\u0022: \u0022[NbConvertApp] Converting notebook script.irnb to html\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 1.864706426000339\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Executing notebook with kernel: ir\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 4.015278165001291\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Support files will be in __results___files/\\n[NbConvertApp] Making directory __results___files\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 13.93309856400083\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Writing 326798 bytes to __results__.html\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 13.935399322001103\n}]","outputFiles":[{"ownerInfo":null,"kernelVersionOutputFileId":19197875,"kernelVersionId":7899851,"kernelId":1997830,"size":0,"fullPath":"Rplot001.png","previewUrl":"/kernels/preview.json/7899851/63dae881-7c49-7e1c-fa7a-e3dc30d0c43b/Rplot001.png","downloadUrl":"https://www.kaggleusercontent.com/kf/7899851/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..YqJCsyZXCmD7jez_uoQkbg.bPVD4s0t3b_e9g-WFrGw3oWN5h_6ZFquW3Ytsn7nHpz_JsLevk4TktRsTwH5NHKy7sl0Of__I8kg4WyNf1_wE-37uUKItSWfuqGgrMIcn45U6ihr8FkyGiiuvFHBZBBf48W0A-_b_7s-Wzt4dYxu4Q.kLdtWIuvnVCyboM6Ct0j-Q/Rplot001.png","fileType":".png","contentLength":34103,"contentType":null,"contentMD5":null,"validationErrors":null,"type":"kernelOutputFile","collapsed":false,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"Rplot001.png","description":null}],"outputFilesCropped":false,"ouputFilesOwnerInfo":{"databundleVersionId":0,"dataset":null,"competition":null,"kernel":{"kernelId":1997830,"kernelVersionId":7899851,"dataviewToken":"eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..HgV_DGIVVD5hhyNtFUqlXA.75ygs3ABjPjn1ikoAcHq4GdacVIs7aHyTu9dxqfS2d-Bmi1_lsaAQJvDoebCHnFIfJfVDLex7UbzS4lysq-pMheRXapDUvWkLNMfLcoLNeYR5JqVGnCwv3cv85YxaHMJ0K1VSdG6kWuxNE9OJIRpYIbj0egzCWkfyPsx9OFU_XcIapODigo3Dz_4cxsbl9CSvkSHMsslqqtk4HQVgoMwjwj0ljtlYDLXP6699OS6mAm3yCZNqfSgUAH_Q_Uj2L5s1Um5LicRWYA7ilCVegTggSVO28nmwh2Fry23QueRiFXKcesCWgPp55iPdCLWvzcf8HnRgAOZr8eZJ1txoeIOjAvRkt5O3xYhasRGQq8rq1Kp0SqDPurZMau1HuKqdnx1lxr3piFjt3C1vuhtea54xvB9H-1dWMx_dIPWj4A0Mo3_ogbWf90gWbVSCMxS8SBViErmSnArufNd6Zl1svtVDJQjQ8qHiy18E7XvMFstmFo.iRaFSq5KjghZokKOfkNqow","scope":"andrewolney/titanic-predict-fare-lab-3"},"previewsDisabled":false},"pageMessages":[],"dataSources":[{"imageUrl":"https://storage.googleapis.com/kaggle-competitions/kaggle/11300/logos/thumb76_76.png?t=2018-10-18-19-55-25","sourceUrl":"/c/titanic-predict-fare","slug":"titanic-predict-fare","lastUpdated":"2018-10-24T20:46:29.687Z","overview":"Predict how much passengers paid to be on the Titanic","sourceType":"competition","sourceVersionType":null,"sourceId":11300,"sourceVersionNumber":null,"maxVersionNumber":null,"descriptionMimeType":"text/markdown","deleted":false,"private":false,"privateButVisible":false,"ownerInfo":{"databundleVersionId":140669,"dataset":null,"competition":{"competitionId":11300,"dataviewToken":null,"scope":"c/titanic-predict-fare"},"kernel":null,"previewsDisabled":true},"type":"dataSource","collapsed":false,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[{"id":508140,"blobFileId":964735,"databundleVersionId":140669,"databundleVersionObjectType":"file","url":null,"relativePath":"../input/test-fare.csv","creationDate":"2018-10-18T20:31:55.019Z","isDummy":false,"size":50493,"fullPath":"../input/test-fare.csv","previewUrl":"kernels/competition-preview/11300?relativePath=test-fare.csv","downloadUrl":"/c/titanic-predict-fare/download/test-fare.csv","fileType":".csv","contentLength":50493,"contentType":"text/csv","contentMD5":"QwTDt5XRw21YS0RbXIWCXA==","validationErrors":null,"type":"databundleVersionObject","collapsed":false,"info":{"metrics":{"tableMetrics":{"exception":null,"rowCount":675},"columnMetrics":[]},"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":{"delimiter":",","includesHeader":true},"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[{"columns":[{"order":0,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"pclass","description":null},{"order":1,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"survived","description":null},{"order":2,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"name","description":null},{"order":3,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"sex","description":null},{"order":4,"originalType":"","type":"numeric","extendedType":"decimal","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"age","description":null},{"order":5,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"sibsp","description":null},{"order":6,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"parch","description":null},{"order":7,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"ticket","description":null},{"order":8,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"cabin","description":null},{"order":9,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"embarked","description":null},{"order":10,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"boat","description":null},{"order":11,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"body","description":null},{"order":12,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"home.dest","description":null}],"totalRows":null,"type":"genericTable","collapsed":true,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"","description":null}],"name":"test-fare.csv","description":"This is the test data. It is missing the fare column which you must predict"},{"id":508141,"blobFileId":964736,"databundleVersionId":140669,"databundleVersionObjectType":"file","url":null,"relativePath":"../input/train.csv","creationDate":"2018-10-18T20:31:55.013Z","isDummy":false,"size":51356,"fullPath":"../input/train.csv","previewUrl":"kernels/competition-preview/11300?relativePath=train.csv","downloadUrl":"/c/titanic-predict-fare/download/train.csv","fileType":".csv","contentLength":51356,"contentType":"text/csv","contentMD5":"gip01wHdxGgxMqK76peXHg==","validationErrors":null,"type":"databundleVersionObject","collapsed":false,"info":{"metrics":{"tableMetrics":{"exception":null,"rowCount":634},"columnMetrics":[]},"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":{"delimiter":",","includesHeader":true},"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[{"columns":[{"order":0,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"pclass","description":null},{"order":1,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"survived","description":null},{"order":2,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"name","description":null},{"order":3,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"sex","description":null},{"order":4,"originalType":"","type":"numeric","extendedType":"decimal","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"age","description":null},{"order":5,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"sibsp","description":null},{"order":6,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"parch","description":null},{"order":7,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"ticket","description":null},{"order":8,"originalType":"","type":"numeric","extendedType":"decimal","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"fare","description":null},{"order":9,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"cabin","description":null},{"order":10,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"embarked","description":null},{"order":11,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"boat","description":null},{"order":12,"originalType":"","type":"numeric","extendedType":"integer","isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"body","description":null},{"order":13,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"home.dest","description":null}],"totalRows":null,"type":"genericTable","collapsed":true,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"","description":null}],"name":"train.csv","description":"This is the train data. It includes the fare column so you can build a model with it."}],"name":"Titanic Predict Fare","description":"# Overview\n\nThe data has been split into two groups:\n\n- training set (train.csv)\n- test set (test.csv)\n\nThe training set should be used to build your machine learning models. For the training set, we provide the outcome (also known as the “ground truth”) for each passenger. Your model will be based on “features” like passengers’ gender and class. You can also use feature engineering to create new features.\n\nThe test set should be used to see how well your model performs on unseen data. For the test set, we do not provide the ground truth for each passenger. It is your job to predict these outcomes. \n\n# Data dictionary\n\n## Variable descriptions \n- Pclass: Passenger Class  (1 = 1st; 2 = 2nd; 3 = 3rd)\n- survival: Survival  (0 = No; 1 = Yes)\n- name: Name\n- sex: Sex\n- age: Age\n- sibsp: Number of Siblings/Spouses Aboard\n- parch: Number of Parents/Children Aboard\n- ticket: Ticket Number\n- fare: Passenger Fare (British pound)\n- cabin: Cabin\n- embarked: Port of Embarkation (C = Cherbourg; Q = Queenstown; S = Southampton)\n- boat: Lifeboat\n- body: Body Identification Number\n- home.dest: Home/Destination\n\n## Notes\nPclass is a proxy for socio-economic status (SES) 1st ~ Upper; 2nd ~ Middle; 3rd ~ Lower\n\nAge is in Years; Fractional if Age less than One (1). If the Age is estimated, it is in the form xx.5\n\nFare is in Pre-1970 British Pounds (). Conversion Factors:  1 = 12s = 240d and 1s = 20d\n\nWith respect to the family relation variables (i.e.  sibsp and parch) some relations were ignored.  The following are  the definitions used for  sibsp and parch.\n\n- Sibling: Brother, Sister, Stepbrother, or Stepsister of Passenger Aboard Titanic\n- Spouse: Husband or Wife of Passenger Aboard Titanic (Mistresses and Fiances Ignored)\n- Parent: Mother or Father of Passenger Aboard Titanic\n- Child: Son, Daughter, Stepson, or Stepdaughter of Passenger Aboard Titanic\n\nOther family relatives excluded from this study include cousins, nephews/nieces,  aunts/uncles, and in-laws.  Some children traveled only with a nanny, therefore parch=0 for them.  As well, some traveled with very close friends or neighbors in a village, \nhowever, the definitions do not support such relations."}],"versions":[{"id":7899851,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"R","lastRunTime":"2018-11-29T16:40:33.13Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":36,"linesInsertedFromPrevious":180,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"sha256:04d80efacc9fe06ec24a96f495a47ff7f579e927b8341e9c94a9b987ebc020c2","dockerImageName":"gcr.io/kaggle-images/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":14.2874755310004,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Titanic Predict Fare - Lab 3","url":"/andrewolney/titanic-predict-fare-lab-3?scriptVersionId=7899851","versionNumber":2,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null},{"id":7163037,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"R","lastRunTime":"2018-11-07T20:15:53.13Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":106,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"sha256:04d80efacc9fe06ec24a96f495a47ff7f579e927b8341e9c94a9b987ebc020c2","dockerImageName":"gcr.io/kaggle-images/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":12.3105870400032,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Titanic Predict Fare - Lab 3","url":"/andrewolney/titanic-predict-fare-lab-3?scriptVersionId=7163037","versionNumber":1,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null}],"categories":{"categories":[],"type":"script"},"submitToCompetitionInfo":null,"downloadAllFilesUrl":"/kernels/svzip/7899851","submission":null,"menuLinks":[{"href":"/andrewolney/titanic-predict-fare-lab-3/notebook","text":"Notebook","title":"Notebook","tab":"notebook","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/andrewolney/titanic-predict-fare-lab-3/code","text":"Code","title":"Code","tab":"code","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/andrewolney/titanic-predict-fare-lab-3/data","text":"Data","title":"Data","tab":"data","count":1,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/andrewolney/titanic-predict-fare-lab-3/output","text":"Output","title":"Output","tab":"output","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/andrewolney/titanic-predict-fare-lab-3/comments","text":"Comments","title":"Comments","tab":"comments","count":0,"showZeroCountExplicitly":true,"reportEventCategory":null,"reportEventType":null},{"href":"/andrewolney/titanic-predict-fare-lab-3/log","text":"Log","title":"Log","tab":"log","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/andrewolney/titanic-predict-fare-lab-3/versions","text":"Versions","title":"Versions","tab":"versions","count":2,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/andrewolney/titanic-predict-fare-lab-3/forks","text":"Forks","title":"Forks","tab":"forks","count":2,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null}],"rightMenuLinks":[],"callToAction":{"href":"/kernels/fork-version/7899851","text":"Fork Notebook","title":"Fork Notebook","tab":null,"count":null,"showZeroCountExplicitly":false,"reportEventCategory":"kernels","reportEventType":"anonymousKernelForkCreation"},"voteButton":{"totalVotes":1,"hasAlreadyVotedUp":false,"hasAlreadyVotedDown":false,"canUpvote":true,"canDownvote":false,"voteUpUrl":"/kernels/vote?id=1997830","voteDownUrl":null,"voters":[{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/2103971-kg.png","displayName":"Michal Bogacz","profileUrl":"/michau96","tier":"Contributor","tierInt":1,"userId":2103971,"userName":"michau96"}],"currentUserInfo":null,"showVoters":true,"alwaysShowVoters":true},"parentDataSource":null,"parentName":"Titanic Predict Fare","parentUrl":"/c/titanic-predict-fare","thumbnailImageUrl":"https://storage.googleapis.com/kaggle-competitions/kaggle/11300/logos/thumb76_76.png?t=2018-10-18-19-55-25","canWrite":false,"canAdminister":false,"datasetHidden":false,"forkParentIsRedacted":false,"forkDiffLinesChanged":0,"forkDiffLinesDeleted":0,"forkDiffLinesInserted":0,"forkDiffUrl":null,"forkParentAuthorDisplayName":null,"forkParentAuthorUrl":null,"forkParentTitle":null,"forkParentUrl":null,"canSeeDataExplorerV2":true,"canSeeRevampedViewer":true,"canSeeInnerTableOfContents":true,"simplifiedViewer":false,"kernelOutputDataset":null});performance && performance.mark && performance.mark("KernelViewer.componentCouldBootstrap");</script>

<form action="/andrewolney/titanic-predict-fare-lab-3" id="__AjaxAntiForgeryForm" method="post"><input name="X-XSRF-TOKEN" type="hidden" value="CfDJ8LdUzqlsSWBPr4Ce3rb9VL-iLcpa4GtRf-CLwudxtQTjjmNeAzAtiKmquz32k-CuXgviH-xC4m9PoBM5bkTQ3JlBLIbkCU_PJz2Hwp-43j3hbjYJwQfVpK1p4umvrCxPry-I84-idutVA6s8CsDK3wQ" /></form>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["STIX", "TeX"],
            linebreaks: {
                automatic: true
            },
            EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
        },
        tex2jax: {
            inlineMath: [["\\(", "\\)"], ["\\\\(", "\\\\)"]],
            displayMath: [["$$", "$$"], ["\\[", "\\]"]],
            processEscapes: true,
            ignoreClass: "tex2jax_ignore|dno"
        },
        TeX: {
            noUndefined: {
                attributes: {
                    mathcolor: "red",
                    mathbackground: "#FFEEEE",
                    mathsize: "90%"
                }
            }
        },
        Macros: {
            href: "{}"
        },
        skipStartupTypeset: true,
        messageStyle: "none"
    });
</script>
<script type="text/javascript" async crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



    </div>

        <div class="site-layout__footer">
            <footer class="site-footer">
    <div class="site-footer__content">
        <div class="site-footer__copyright">
            <span>&copy; 2019 Kaggle Inc</span>
        </div>
        <nav class="site-footer__nav">
            <a href="/team">Our Team</a>
            <a href="/terms">Terms</a>
            <a href="/privacy">Privacy</a>
            <a href="/contact">Contact/Support</a>
        </nav>
        <nav class="site-footer__social">
            <div data-component-name="SocialIcons" style="display: flex; flex-direction: column; flex: 1 0 auto;"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push();performance && performance.mark && performance.mark("SocialIcons.componentCouldBootstrap");</script>
        </nav>
    </div>
</footer>

        </div>
</div>




</body>
</html>
