{"cells":[{"metadata":{"_uuid":"65d7c4a9a9c06cc8857d21f69b5d40ea9d2f785a"},"cell_type":"markdown","source":"# <center>Introducation<center>\n> This report attemps to analyse what sorts of people are likely to survive.  \n>Datasets are imported from Kaggle.\n* Packages Import and Datasets Load\n* Data Visulisation\n* Data Cleaning\n   \n"},{"metadata":{"_uuid":"534bffa988667a4b97181e57f1439814c10dd34a","_execution_state":"idle","trusted":false,"_kg_hide-output":true},"cell_type":"markdown","source":"# Importing packages and Datasets "},{"metadata":{"trusted":true,"_uuid":"7d9ac6d9d7b86924596a599a271eb4f6008a5327","_kg_hide-output":true,"_kg_hide-input":false},"cell_type":"code","source":"library(tidyverse)\nlibrary(tree)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggcorrplot)\nlibrary(ggpubr)\nlibrary(plotly)\nlibrary(gridExtra)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"12fb7cce7bb019f432c765529da01b6ba252e0ce"},"cell_type":"code","source":"test <- read.csv(\"../input/test.csv\", na.strings = \"\")\ntrain <- read.csv('../input/train.csv', na.strings = \"\")\nfulldata <- rbind(select(train,-Survived), test) \n","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"eea1c47cd9943d8e0252e53d365b5aeae23b8729"},"cell_type":"markdown","source":"> Dupplicte original date sets."},{"metadata":{"trusted":true,"_uuid":"703c2c1dec259ee7fafa18d86d6c5ff98d0cf27c"},"cell_type":"code","source":"test_ini <- test\ntrain_ini <- train\nfull_ini <- fulldata","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"57012313e8986de51687b76d1431725bb94db2d2"},"cell_type":"markdown","source":"# Data Visulasation"},{"metadata":{"trusted":true,"_uuid":"a18603550d381e1cef9678bb9ae3058948e4404b","scrolled":true},"cell_type":"code","source":"summary(train)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"ad245783addccc42c2881a167f82b372ba411b65"},"cell_type":"markdown","source":"> There are 11 features \n> * PassengerId : unqie id servers as primary key\n> * Pclass \n> * Name \n> * Sex \n> * Age : 177 missing values\n> * Sibsp : Number of Siblings and Spouse\n> * Parch : Number of Parents and Children\n> * Ticket \n> * Fare : 1 missing values\n> * Cabin : 687 missing values \n> * Embarked: 2 missing values\n"},{"metadata":{"_uuid":"8c898ca47d6433fe5a65f9fa1d7500f3d986c2c8"},"cell_type":"markdown","source":"> Convert `Survived`, `Pclass`  into  a categorical variable.   \n>  Survived:            0 = victim; 1= survivor  \n>   Pclass:            1;2; 3 "},{"metadata":{"trusted":true,"_uuid":"f9487066da703ac99530af2c526b20f1bb46c934"},"cell_type":"code","source":"train$Survived <- factor(train$Survived, levels = c(0,1))\ntrain$Pclass <- factor(train$Pclass, levels = c(1,2,3))","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"0fb0a4fd45262fab99ee99b6f8e776a8bc9e8f07"},"cell_type":"markdown","source":"> Plot the graph for Pclass, Sex, Embarked, Fare,  SibSp, Parch and Age separately, to see if there is a relationship between the survival and this single feature. "},{"metadata":{"trusted":true,"_uuid":"a4503a7df01726022b3b4682a5a6a99f15ff841e"},"cell_type":"code","source":"p1 <- train %>% ggplot(aes(Pclass, fill = Survived))+ geom_bar() + theme_classic() + scale_fill_discrete(guide = FALSE) \np2 <- train %>% ggplot(aes(Sex, fill = Survived)) + geom_bar() + theme_classic() + scale_fill_discrete(guide = FALSE) \np3 <- train %>% filter(is.na(Age) == FALSE) %>% ggplot(aes(Age, fill = Survived)) + geom_histogram(binwidth=5, alpha=.3, position=\"identity\") + theme_classic() + scale_fill_discrete(guide = FALSE) \np4 <- train %>% ggplot(aes(SibSp, fill = Survived)) + geom_bar(alpha=.3, position=\"identity\") + theme_classic() + guides(fill = NULL)\np5 <- train %>% ggplot(aes(Parch, fill = Survived)) + geom_bar(alpha=.3, position=\"identity\") + theme_classic() \np6 <- train %>% ggplot(aes(Fare, fill = Survived)) + geom_histogram(binwidth = 10) + theme_classic() \np7 <- train %>% ggplot(aes(Embarked, fill = Survived)) + geom_bar() + theme_classic()\nggarrange( ggarrange(p1,p2,p7, nrow = 1, ncol = 3), p6, nrow = 2,common.legend = TRUE)\nggarrange( p4,p5,p3, nrow = 1,ncol = 3, common.legend = TRUE)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"82d54f1c36e91793c54238042fefcf1f0f8ca0d3"},"cell_type":"markdown","source":"> From the above graph, there is strong evidence suggesting that `Pclass`, `Sex` has  relationship with `Survival`.   \n> * Passengers in the first class and second class are more likely to survive compared to those in third class.  \n> * Female have a much greater chance to survive compared to male.\n\n> The rate of survival is above 50%  while the rate of survival in third class is about 25%.    (approximately 50% in second class)  \n\n> For the feature `Embarked` place, it seems that passengers who embarked on 'S'  are less likely to survive.  \n> Since the range of `Fare` is quite large, it is difficult to tell if this is a feature related to the survival rate. In fact, this feature is implied in the feature Pclass.  \n\n> The bottom three graphs count the survivors and victims separately. \n> The information we can get from the plots for `SibSp` and `Parch` are limited. We may consider to add these to factors to get a new factor 'traveling size'. \n> According to the plot of `Age`,   younger passengers are more likely to survive."},{"metadata":{"_uuid":"7907499a0fe215118cf0c5905e150e1e34c18506"},"cell_type":"markdown","source":"### Age vs Survived"},{"metadata":{"trusted":true,"_uuid":"29cc49f1e84f97a5a7c41d7109d2d13cf9ab9cf1"},"cell_type":"code","source":"train %>% ggplot() + \n  geom_jitter(aes(x = Age, y = '', colour = Survived)) + \n  facet_grid(factor(Pclass,levels = c(1,2,3), labels = c('Pclass = 1','Pclass = 2', 'Pclass = 3')) ~ Sex, scale = 'free') + \n  theme_bw() +\n  labs(y = '') +\n  theme(strip.text.y = element_text(size = 10), \n        strip.background = element_rect(fill = 'pink'),\n        axis.ticks.y = element_blank()\n       )\n","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"900e105a59bdd21a72ddfe0068140b6743be8dd0"},"cell_type":"markdown","source":"> The above facets suggest that most female passengers in the first and second class are survived, while for those in the third class, the possibility of being a survivor is lower if they are older than 40.  \n> For the male passengers, young boys are more likely to be survived."},{"metadata":{"trusted":true,"_uuid":"8849ff51723cea52ae7395d3da20b3acacf4e73b"},"cell_type":"code","source":"train %>% ggplot(aes(size = factor(Parch + SibSp),x = Age, y =Sex, colour = Survived)) + geom_jitter() + theme_classic() ","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"e3332fb74ed8ff111733ce94d30df72667d61151"},"cell_type":"markdown","source":"# Data Cleaning "},{"metadata":{"trusted":true,"_uuid":"8944e421ba3def7e657416ce2ce59575a655fdd0"},"cell_type":"code","source":"fulldata$Pclass <- as.factor(fulldata$Pclass)\nfulldata$Name <- as.character(fulldata$Name)\nfulldata$Age <- as.integer(fulldata$Age)\nfulldata$Ticket <- as.character(fulldata$Ticket)\nsummary(fulldata)\n","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"98b49ef4a9c8cd98e9c5eb0bf9e043073bb49e21"},"cell_type":"markdown","source":"\n* 1014 missing values in Cabin (too many missing values,  drop this feature ).\n* 2 missing values in Embarked.\n* 1 missing values in Fare\n* 263 missing values in Age."},{"metadata":{"trusted":true,"_uuid":"229c7c59474d53367498e52a0b05123f4c5b832c"},"cell_type":"code","source":"fulldata <- select(fulldata,-Cabin)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"0dbe145d8e1f959b418f47cccc2de3444bc497e5"},"cell_type":"markdown","source":"## *NA in Embarked*"},{"metadata":{"trusted":true,"_uuid":"6cba1d5a9bc994a8363ba07a215d1de2ae16abde"},"cell_type":"code","source":"filter(fulldata,is.na(Embarked))\ntable(fulldata$Embarked)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"4d3ed2c6d723b43e2c27871bcc23177621f9f3ba"},"cell_type":"markdown","source":"Replace the missing values in Embarked by the mode 'S'. "},{"metadata":{"trusted":true,"_uuid":"7fd3a1100a95f5fc4da0cbbbcd78515fa9bb73fa"},"cell_type":"code","source":"fulldata$Embarked[c(62,830)]<- 'S'","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"d327af8fc6385912669695033731bac61f75e95d"},"cell_type":"markdown","source":"## *NA in Fare*\n> Fare of a tickect can be influenced by the distance of journery and travel classes.  \n> The corresponding two factors here are Embarked and Pclass.  "},{"metadata":{"trusted":true,"_uuid":"d105c441c4260446c0aaf8333600b24a2f8c60f3"},"cell_type":"code","source":"filter(fulldata, is.na(Fare))","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"6927248f904562436cfe247fc48b51eb3cb6ce0f"},"cell_type":"markdown","source":"> Replace the fare by the mean value."},{"metadata":{"trusted":true,"_uuid":"3fa2f95730b9c30df0efeae49bf4fec160f19aa1"},"cell_type":"code","source":"fulldata$Fare[1044] <- fulldata %>% \n  filter(Pclass == 3 & Embarked == 'S') %>% \n  .$Fare %>%\n  mean(., na.rm = TRUE)\n","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"9f83541beb17200cb91563047157262e8beb9602"},"cell_type":"markdown","source":"## *NA in Age*"},{"metadata":{"_uuid":"ee9bd53a4a0b0c6f960db5b275516b3e96772562"},"cell_type":"markdown","source":"> When deducing the missing values in age,  we could use the title in the passenger's name.  For example, 'Master' implies a young boy.  \n> First extract titles from the name."},{"metadata":{"trusted":true,"scrolled":false,"_uuid":"55dbc12f1d6c8688751e8277cab40b19c000cb79"},"cell_type":"code","source":"namesplited <- strsplit(fulldata$Name, split = '[,.]')\nfulldata$Title <- sapply(namesplited, FUN = function(x){sub(\" \",\"\",x[2])})","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"4f32e5ce3cd1c70ddbbd0bc795d46c51a3b21b87","scrolled":true},"cell_type":"code","source":"fulldata %>% \n  filter(is.na(Age)) %>% \n  select(Title) %>% \n  table()","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"8960057f1022f9f61e1ba4ed4df7f7399e29bba7"},"cell_type":"code","source":"fulldata %>% \n  filter(Title %in% c('Dr','Master','Miss','Mr','Mrs','Ms')) %>%\n  select(Title) %>%\n  table()","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"92632a70b3aafc9aed858a7becc2c7fb2055e7e9"},"cell_type":"markdown","source":"> There are only two passengers whose title is 'Ms'.  \n>  Merge Title 'Ms' into 'Miss'"},{"metadata":{"trusted":true,"_uuid":"2a82bd71d68a0d62dfcd9936135212113fa398df"},"cell_type":"code","source":"fulldata %>% \n  filter(Title == 'Ms')","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"7a85270434cc8d60ae00957ad9b9e566ec41fbd1"},"cell_type":"code","source":"fulldata$Title[c(444,980)] <- 'Miss'","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"35bae26177664943a6b044eed3a9b5ff5b2ed06f"},"cell_type":"markdown","source":"1. Miss"},{"metadata":{"_uuid":"3226269fa92856096b735130ce727397b4a5c392"},"cell_type":"markdown","source":"> For passengers with Title 'Miss', the range of age is large.  \n> However, we may consider the number of Parch along with title when deducing the age.  \n> Since for young girls, they do not travel along, which means the Parch should be greater than 0. "},{"metadata":{"trusted":true,"_uuid":"52c18e88f067b9cfe50f11b92647078d821b8a37"},"cell_type":"code","source":"fulldata %>% \n  filter(Title == 'Miss') %>%\n  ggplot() + \n  geom_histogram(aes(Age,fill = factor(Parch)),binwidth = 2) +  \n  scale_fill_brewer(palette = 'Pastel2') + \n  labs(fill = 'Number of Parch')","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"5030982b9caabb210731f8b0eebf8ae8a5695e00"},"cell_type":"markdown","source":"> The plot above suggest that  most young girls travel with at least one of parents.\n"},{"metadata":{"trusted":true,"_uuid":"650cf10671d1a0b09bf6bc22b596c0c65d27131a"},"cell_type":"code","source":"med1 <- fulldata %>% \n  filter(Title == 'Miss' & Parch > 0 & is.na(Age) == FALSE) %>% .$Age %>% median()\nmed2 <- fulldata %>% \n  filter(Title == 'Miss' & Parch == 0 & is.na(Age) == FALSE) %>% .$Age %>% median()\nm <- c(med1,med2)\nfulldata %>% \n  mutate(tempt = Parch/Parch) %>%\n  filter(Title == 'Miss' & is.na(Age) == FALSE)  %>%  \n  ggplot(aes(x = factor(tempt), y = Age)) + \n  geom_boxplot(aes(colour =factor(tempt, levels = c(1,'NaN'), labels = c('Parch > 0','Parch = 0')) ),width = 0.2) + \n  geom_text(data = data.frame(m,c(1,2)), aes(x = c(1,2)+0.15,y = m, label = m),color = 'purple') + \n  theme(axis.title.x = element_blank(),\n        axis.text.x  = element_blank(),\n        legend.title = element_blank())\n","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"666f383b6123f4b4399283f4cf9188213a553264"},"cell_type":"markdown","source":"> Replace the missing ages by median according to the number of Parch."},{"metadata":{"trusted":true,"_uuid":"39b93881e6f5f32fe95761172f31d026dc3dab5e"},"cell_type":"code","source":"missage1 <- fulldata %>%\n  filter(Title == 'Miss' & is.na(Age) & Parch > 0) %>% \n  pull(PassengerId)\n\nfulldata$Age[missage1] <- 9.5","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"cd1299215c98ac414768dca18d9dd92b1db6ce4e"},"cell_type":"code","source":"missage2 <- fulldata %>%\n  filter(Title == 'Miss' & is.na(Age) & Parch == 0) %>% \n  pull(PassengerId)\nfulldata$Age[missage2] <- 26 ","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"6e81a22f45bc265f30bf1e80777e13a950ad9978"},"cell_type":"markdown","source":"2. Master"},{"metadata":{"trusted":true,"_uuid":"821ea38f0911d28a3faddbad55e48b1d621616cf"},"cell_type":"code","source":"fulldata %>% \n  filter(Title == 'Master') %>%\n  select(Age) %>%\n  summary() ","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"857a687a91ee0445841d73d23900bf63e0013063"},"cell_type":"markdown","source":"> The passengers with title 'Master' are young boys.  \n> Replace the missing values by the Mean, i.e. 5 here."},{"metadata":{"trusted":true,"_uuid":"2bdaf782eef4851b99af0e41bd60207926f32ccc"},"cell_type":"code","source":"masterage <- fulldata %>%\n  filter(Title == 'Master' & is.na(Age)) %>% \n  pull(PassengerId)\nfulldata$Age[masterage] <- 5","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"129cc1fb492a1324d53525d98674da7709dcb7aa"},"cell_type":"markdown","source":"3. Dr"},{"metadata":{"trusted":true,"_uuid":"09b5fb3532547d2b4c37871b82b9cd63dc5e175f"},"cell_type":"code","source":"fulldata %>%\n  filter(Title == 'Dr')","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"03a5901c8def226361b4f21bf3a75199a1137daf"},"cell_type":"markdown","source":"> Passenger 767 with missing age  is in first class and is a male.  \n> Use ***mean*** age of those have same features to replace."},{"metadata":{"trusted":true,"_uuid":"90823eda27d39abfe5fe2b294b9f6afaf3b3caa4"},"cell_type":"code","source":"fulldata$Age[767] <- fulldata %>% \n  filter(Pclass == 1 & Sex == 'male' & Title == 'Dr' & is.na(Age) == FALSE) %>% \n  .$Age %>%\n  mean() \n\n# 44.75","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"5f1dacc6a15d03089a0722820112e5182e6df7e4"},"cell_type":"markdown","source":"4. Mr and Mrs "},{"metadata":{"trusted":true,"_uuid":"fe32a2167b81dc3c894a3dc86749b02c89e79b1c"},"cell_type":"code","source":"fulldata %>% \n  filter(is.na(Age) == FALSE & Title %in% c('Mrs','Mr')) %>% \n  ggplot() + \n  geom_boxplot(aes(x = '', y = Age, fill = factor(Title))) + \n  theme_bw()  + \n  facet_grid(.~factor(Pclass, \n                      levels = c(1,2,3), \n                      labels = c('Pclass = 1','Pclass = 2', 'Pclass = 3')\n                     )\n            ) +\n  labs(x = '') + \n  theme(legend.title = element_blank())","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"73bf36cae8072f65026f87e3b2ff9865f8b69ffa"},"cell_type":"code","source":"fulldata %>% \n  filter(is.na(Age) == FALSE & Title %in% c('Mrs','Mr')) %>% \n  group_by(Pclass, Title) %>% summarise(Med_Age = median(Age))","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"efe89b68137f8569e0fd964bc35b8804d7e231e0"},"cell_type":"code","source":"age1 <- fulldata %>% filter(Title == 'Mr' & Pclass == 1 & is.na(Age)) %>% pull(PassengerId)\nage2 <- fulldata %>% filter(Title == 'Mrs' & Pclass == 1 & is.na(Age)) %>% pull(PassengerId)\nage3 <- fulldata %>% filter(Title == 'Mr' & Pclass == 2 & is.na(Age)) %>% pull(PassengerId)\nage4 <- fulldata %>% filter(Title == 'Mrs' & Pclass == 2 & is.na(Age)) %>% pull(PassengerId)\nage5 <- fulldata %>% filter(Title == 'Mr' & Pclass == 3 & is.na(Age)) %>% pull(PassengerId)\nage6 <- fulldata %>% filter(Title == 'Mrs' & Pclass == 3 & is.na(Age)) %>% pull(PassengerId)\nfulldata$Age[age1] <- 41.5\nfulldata$Age[age2] <- 45.0\nfulldata$Age[age3] <- 30\nfulldata$Age[age4] <- 30.5\nfulldata$Age[age5] <- 26\nfulldata$Age[age6] <- 31","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"277832237b6b716965e84c5b7d6847a65bcd93e2"},"cell_type":"code","source":"summary(fulldata)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"9634aef9b54ceb87a55b3770bcd495a1e0c511a0"},"cell_type":"code","source":"fulldata $ TravalSize <- fulldata $ SibSp + fulldata $ Parch","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"1cc9df53f0d1c1fe7895171c07f4c8f641ebb986"},"cell_type":"markdown","source":"# Feature Selection"},{"metadata":{"trusted":true,"_uuid":"c30d67fabf9252f65bebd8b1051bae22b6d59153"},"cell_type":"code","source":"train_temp <- fulldata[1:891,] \ntrain_temp$Survived <- train$Survived","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"d5422ddba8b0e2e888d2ed85a134c3b4ec37385c"},"cell_type":"code","source":"train_temp %>% ggplot() + \n  geom_jitter(aes(x = Age, y = '', colour = Survived)) + \n  facet_grid(factor(Pclass,levels = c(1,2,3), labels = c('Pclass = 1','Pclass = 2', 'Pclass = 3')) ~ Sex, scale = 'free') + \n  theme_bw() +\n  labs(y = '') +\n  theme(strip.text.y = element_text(size = 10), \n        strip.background = element_rect(fill = 'pink'),\n        axis.ticks.y = element_blank()\n       )","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"666c2d365b884daa50baff4a45adf93497fa12cb"},"cell_type":"markdown","source":"# Modelling"},{"metadata":{"trusted":true,"_uuid":"6098a72278f7ad47d24296d3ac6dbd9aecd4655c"},"cell_type":"code","source":"library(tree)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"feee47a80e630cc8e025d29b4894eb96e4978ca0"},"cell_type":"code","source":"fulldata2 <- select(fulldata, -c(Name,SibSp,Parch,Ticket,Title))","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"1cc1334669651093b0972627b8682cfef4bc14ba"},"cell_type":"code","source":"train2 <- fulldata2[1:891,]","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"f812afa8d7cd2d21119bfe613436c5ab006fae24"},"cell_type":"code","source":"str(train2)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"965ac5497d949f8ab3a2bbc775184c74495f2d6a"},"cell_type":"code","source":"samp <- sample (1:nrow(train2), 700)\n","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"7cc29f22550d515bd72619ed057b3ef170901b8e"},"cell_type":"code","source":"survival <- train$Survived\nsurvival <- as.factor(survival)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"18cb71665eacf9794938c33aeff9da59a4d35c87"},"cell_type":"code","source":"survival_test <- survival[-samp]\ntestdf <- train2[-samp,]","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"36df82dbfd4b8c79e11d2ed9aa9671d9ea88c460"},"cell_type":"code","source":"treedf <- tree(survival ~ . -PassengerId, train2, subset = samp)\ntreePred <- predict(treedf, testdf, type = \"class\")","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"f40c9c12b002c6848ab6be21990ec4ea657479c0"},"cell_type":"code","source":"table(treePred, survival_test)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"c07550b054ec016b7281db1fb7e9b4fec68dc0ab"},"cell_type":"markdown","source":"$\\dfrac{97+55}{97+55+19+20} = 0.796 $\n"},{"metadata":{"trusted":true,"_uuid":"3253fdb619b27eea1b40b5a3167bf9159d28d5e7"},"cell_type":"code","source":"treemodel <- tree(survival ~ . - PassengerId, train2)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"aa4bd9292dc8e46c16116a49eec0228c513a09de"},"cell_type":"code","source":"predictdf <- fulldata2[892:nrow(fulldata2), ]","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"2630c7d8f7e28243ba8fa6b4ac63613e6bbc6420"},"cell_type":"code","source":"prediction <- predict(treemodel,predictdf,type = 'class')","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"53679d0b7e0b75cc4b59c826d41a4778f8e13a2f"},"cell_type":"code","source":"sub <- data.frame(test$PassengerId,prediction)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"37e0b7b34d491c2b68f9877b04937fe526fc69d1"},"cell_type":"code","source":"colnames(sub) <- c('PassengerId','Survived')","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"e41e8e1e03918bc334342c0c090711beceba56a5"},"cell_type":"code","source":"write.csv(sub,'MySubmission')","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"2fa13c20a5c40941e28d5d530f88b5daf728fb38"},"cell_type":"code","source":"","execution_count":null,"outputs":[]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"3.4.2","file_extension":".r","codemirror_mode":"r"}},"nbformat":4,"nbformat_minor":1}