<!DOCTYPE html>
<html lang="en">
<head>
    <title>Titanic New View | Kaggle</title>
    <meta charset="utf-8" />
    <meta name="robots" content="index, follow" />
    <meta name="turbolinks-cache-control" content="no-cache" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">    <meta name="theme-color" content="#008ABC" />
    <script type="text/javascript">
        window["initialPageLoadStartTime"] = new Date().getTime();
    </script>
    <link rel="dns-prefetch" href="https://www.google-analytics.com" /><link rel="dns-prefetch" href="https://stats.g.doubleclick.net" /><link rel="dns-prefetch" href="https://js.intercomcdn.com" /><link rel="dns-prefetch" href="https://storage.googleapis.com/" />
    <link href="/static/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="manifest" href="/static/json/manifest.json">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic" rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type='text/css'/>
        <link rel="canonical" href="/salomao2005/titanic-new-view" />                    <link rel="stylesheet" type="text/css" href="/static/assets/vendor.css?v=632d145d8598" />
        <link rel="stylesheet" type="text/css" href="/static/assets/app.css?v=1d00932a7505" />
    
    
 
        <script>
        try{(function(a,s,y,n,c,h,i,d,e){d=s.createElement("style");
        d.appendChild(s.createTextNode(""));s.head.appendChild(d);d=d.sheet;
        y=y.map(x => d.insertRule(x + "{ opacity: 0 !important }"));
        h.start=1*new Date;h.end=i=function(){y.forEach(x => d.deleteRule(x))};
        (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
        })(window,document,['.site-header-react__nav'],'dataLayer',2000,{'GTM-52LNT9S':true});}catch{}
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-12629138-1', {
            'optimize_id': 'GTM-52LNT9S',
            'displayFeaturesTask': null,
            'send_page_view': false
        });
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12629138-1"></script>

    
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq("set", "autoConfig", "false", "136809193586742");
    fbq('init', '136809193586742'); 
    fbq('track', 'PageView');
</script>
<noscript>
    <img height="1" width="1" src="https://www.facebook.com/tr?id=136809193586742&ev=PageView&noscript=1"/>
</noscript>

<script>window.intercomSettings = {"app_id":"koj6gxx6"};</script>        <script>(function () { var w = window; var ic = w.Intercom; if (typeof ic === "function") { ic('reattach_activator'); ic('update', intercomSettings); } else { var d = document; var i = function () { i.c(arguments) }; i.q = []; i.c = function (args) { i.q.push(args) }; w.Intercom = i; function l() { var s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://widget.intercom.io/widget/koj6gxx6'; var x = d.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); } if (w.attachEvent) { w.attachEvent('onload', l); } else { w.addEventListener('load', l, false); } } })()</script>
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@kaggledatasets" />
    <meta name="og:url" content="https://kaggle.com/salomao2005/titanic-new-view" />
    <meta name="og:title" content="Titanic New View" />
    <meta name="og:description" content="Using data from Titanic: Machine Learning from Disaster" />
    <meta name="og:image" content="https://storage.googleapis.com/kaggle-avatars/thumbnails/1365947-kg.jpg" />


    
    

    
    
    
<script type="text/javascript">
    var Kaggle = Kaggle || {};

    Kaggle.Current = {
        antiForgeryToken: 'CfDJ8LdUzqlsSWBPr4Ce3rb9VL-KRuWpqYUlD47Ijsjo20pN7R3fRr2mQdUMuRuJWDRYBhbYSPIbRJ2-6vaV6hPGnG9gUu9IGqYdDAk7gpBvhHKQAzDBx-elU3Ht9Zvh14-_0Qez6OThBzAvMtBRmVO0j_U',
        isAnonymous: true,
        analyticsToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNTE2NjYsIlVzZXJJZCI6MH0.6HKzF_-VGymBRZvMaB_HVF-JU1p6GN2C4SQIfH2wLKc',
        analyticsTokenExpiry: 15,
        internetKernelsEnabled: false,
        
        
        
        
        
        
        
        
        
        
        
    }
        Kaggle.Current.log = function(){};
        Kaggle.Current.warn = function(){};

    var decodeUserDisplayName = function () {
        var escapedUserDisplayName = Kaggle.Current.userDisplayNameEscaped || "";
        try {
            var textVersion = new DOMParser().parseFromString(escapedUserDisplayName, "text/html").documentElement.textContent;
            if (textVersion) {
                return textVersion;
            }
        } catch(ex) {}
        return escapedUserDisplayName;
    }
    Kaggle.Current.userDisplayName = decodeUserDisplayName();
</script>

    

<script type="text/javascript">
    var Kaggle = Kaggle || {};
    Kaggle.PageMessages = [];
</script>

    
<script type="text/javascript">
/* <![CDATA[ */
goog_snippet_vars = function() {
    var w = window;
    w.google_conversion_id = 955616553;
    w.google_conversion_label = "QSjvCKDksHMQqZrWxwM";
    w.google_conversion_value = 0.00;
    w.google_conversion_currency = "USD";
    w.google_remarketing_only = false;
    w.google_conversion_language = "en";
    w.google_conversion_format = "3";
    w.google_conversion_color = "ffffff";
}
// DO NOT CHANGE THE CODE BELOW.
goog_report_conversion = function(url) {
    goog_snippet_vars();
    window.google_conversion_format = "3";
    var opt = new Object();
    opt.onload_callback = function() {
        if (typeof(url) != 'undefined') {
            window.location = url;
        }
    }
    var conv_handler = window['google_trackConversion'];
    if (typeof(conv_handler) == 'function') {
        conv_handler(opt);
    }
}
/* ]]> */
</script>
<script type="text/javascript"
src="//www.googleadservices.com/pagead/conversion_async.js">
</script>



        <script>window['useKaggleAnalytics'] = true;</script>

    <script src="/static/assets/vendor.js?v=4721d2c14786" data-turbolinks-track="reload"></script>
    <script src="/static/assets/app.js?v=1a3cd8c35fe7" data-turbolinks-track="reload"></script>
        <script>
            (function() {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register("/static/assets/service-worker.js").then(function(reg) {
                        reg.onupdatefound = function() {
                            var installingWorker = reg.installing;
                            installingWorker.onstatechange = function() {
                                switch (installingWorker.state) {
                                case 'installed':
                                    if (navigator.serviceWorker.controller) {
                                        console.log('New or updated content is available.');
                                    } else {
                                        console.log('Content is now available offline!');
                                    }
                                    break;
                                case 'redundant':
                                    console.error('The installing service worker became redundant.');
                                    break;
                                }
                            };
                        };
                    }).catch(function(e) {
                      console.error('Error during service worker registration:', e);
                    });
                }
            })();
        </script>
    <script>
        function handleClientLoad() {
            try {
                gapi.load('client:auth2');
            } catch (e) {
                // In Opera, readystatechange is an unreliable detection of script load, causing
                // this function to be called before gapi exists on the window. The onload callback
                // is still called at the correct time, so the feature works as expected - it's
                // just generating noisy errors.
            }
        }
    </script>
    <script async defer src="https://apis.google.com/js/api.js"
            onload="this.googleApiOnLoad=function(){};handleClientLoad()"
            onreadystatechange="if (this.readyState === 'complete') this.googleApiOnLoad()">
    </script>
</head>
<body data-turbolinks="true">
    <main>
        






<div class="site-layout">
        <div class="site-layout__header">
            <div data-component-name="SiteHeaderContainer" style="display: flex; flex-direction: column; flex: 1 0 auto;"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({});performance && performance.mark && performance.mark("SiteHeaderContainer.componentCouldBootstrap");</script>
        </div>

    <div class="site-layout__main-content">
        

<div data-component-name="KernelViewer" style="display: flex; flex-direction: column; flex: 1 0 auto;"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({"kernel":{"id":3387288,"title":"Titanic New View","forkParent":null,"currentRunId":12103463,"mostRecentRunId":12103463,"url":"/salomao2005/titanic-new-view","tags":[],"commentCount":0,"upvoteCount":2,"viewCount":114,"forkCount":0,"bestPublicScore":0.78947,"author":{"id":1365947,"displayName":"Paulo Salomão","email":null,"editedEmail":null,"editedEmailCode":null,"userName":"salomao2005","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1365947-kg.jpg","profileUrl":"/salomao2005","registerDate":"0001-01-01T00:00:00Z","lastVisitDate":"0001-01-01T00:00:00Z","statusId":0,"performanceTier":0,"userRoles":null,"userLogins":null,"groupIds":null,"duplicateUsers":null,"hasPhoneVerifications":false,"failedNerdchas":0,"hasPendingNerdcha":false,"deleteRequests":null,"userAttributes":null,"isAdmin":false,"isTvc":false,"isKaggleBot":false,"isAdminOrTvc":false,"isAnonymous":false,"canAct":false,"canBeSeen":false,"thumbnailName":null,"activationCode":"00000000-0000-0000-0000-000000000000","isPhoneVerified":false},"isPrivate":false,"updatedTime":"2019-03-26T18:31:10.21Z","selfLink":"/kernels/3387288","pinnedDockerImageVersionId":null,"isLanguageTemplate":false,"medal":null,"topicId":null,"readGroupId":null,"writeGroupId":null,"slug":"titanic-new-view"},"kernelBlob":{"id":237463460,"settings":{"dockerImageVersionId":null,"dataSources":[{"sourceType":"Competition","sourceId":3136,"databundleVersionId":null}],"sourceType":"script","language":"rmarkdown","isGpuEnabled":true,"isInternetEnabled":false},"source":"---\r\ntitle: \u0022Titanic Competition - Automating model selection using Caret\u0022\r\nauthor: \u0022Cristina Santana Souza\u0022\r\ndate: \u0022March 2019\u0022\r\noutput:\r\n  html_document:\r\n    number_sections: true # Sets an automatic number for each item\r\n    code_folding: show    # Shows the source code by default\r\n    toc: true             # Defines a summary for the document\r\n    fig_width: 10         # Standard figure width\r\n---\r\n\r\n```{r setup, include=FALSE}\r\nknitr::opts_chunk$set(echo = TRUE)\r\n```\r\n\r\n# Goal\r\n\r\nPredict which people will survive and create an automated process to test multiple models simultaneously and choose the one that got the best performance.\r\n\r\n# Fields\r\n\r\n* PassengerId: Id given to each traveler on the boat\r\n* Survived: 0 = No, 1 = Yes\r\n* Pclass: Passenger class, it has three possible values: 1,2,3 (first, second and third class)\r\n* Name: Name of the passenger\r\n* Sex: Sex of the passenger\r\n* Age: Age of the passenger\r\n* SibSp: Number of siblings and spouses traveling with the passenger\r\n* Parch: Number of parents and children traveling with the passenger\r\n* Ticket: Ticket number\r\n* Fare: Ticket fare\r\n* Cabin: Cabin number\r\n* Embarked: The embarkation, three possible values: S,C,Q\r\n\r\n```{r ini}\r\n# Informs the process start date/time\r\ndateIni \u003c- Sys.time()\r\ncat(\u0022\\n Start of execution: \u0022, as.character(dateIni))\r\n```\r\n\r\n```{r libraries, include=FALSE}\r\n# Lists the libraries that will be used\r\nlibs = c(\u0022data.table\u0022,\u0022ggplot2\u0022,\u0022randomForest\u0022,\u0022ROSE\u0022,\u0022DMwR\u0022,\u0022corrplot\u0022,\u0022caret\u0022,\r\n         \u0022xgboost\u0022,\u0022e1071\u0022,\u0022PRROC\u0022,\u0022klaR\u0022,\u0022dplyr\u0022,\u0022tidyr\u0022)\r\n# Loads or installs the package\r\nfor(i in libs)\r\n{\r\n  if(i %in% row.names(installed.packages()) == FALSE){\r\n    cat(\u0022Load/install the library: \u0022, i, \u0022\\n\\n\u0022)\r\n    install.packages(i, repos = \u0022http://cran.us.r-project.org\u0022)\r\n    library(i, character.only = TRUE)\r\n  } else {\r\n    cat(\u0022Load the library: \u0022, i, \u0022\\n\\n\u0022)\r\n    library(i, character.only = TRUE)\r\n  }\r\n}\r\n```\r\n\r\n# Load datasets\r\n\r\n```{r load}\r\ntrainPath \u003c- \u0022../input/train.csv\u0022\r\ntestPath  \u003c- \u0022../input/test.csv\u0022\r\ntrainOri \u003c- read.csv(trainPath, na.strings = c(\u0022NA\u0022,\u0022NaN\u0022, \u0022\u0022))\r\ntestOri \u003c- read.csv(testPath, na.strings = c(\u0022NA\u0022,\u0022NaN\u0022, \u0022\u0022))\r\n```\r\n\r\n# Function \u0022createModels\u0022\r\n\r\nThe \u0022createModels\u0022 function was created to facilitate the training of the model, it generates five models according to the algorithm and the parameters informed, analyzes the most important variables, generates a ROC chart comparing the models and informs which one obtained the best performance.\r\n\r\n**Models:**\r\n  \r\n * Model 1 - Original - No resampling technique\r\n * Model 2 - Oversampling: this technique includes elements in the minority class\r\n * Model 3 - Undersampling: this technique excludes elements in the majority class\r\n * Model 4 - Random Oversampling Examples: also called ROSE, it generates artificial balanced samples\r\n * Model 5 - Synthetic Minority Oversampling Technique: also called SMOTE, it creates artificial examples by interpolation\r\n\r\n**Parameters:**\r\n\r\n * formula: formula with the values of X and Y that will be used to generate the model\r\n * data: dataframe with the data that will be trained                                    \r\n * methods: name of the algorithms that will be used, example \u0022knn\u0022,\u0022rf\u0022\r\n * ctrl: informs the control parameters                                            \r\n * preProcess: it specifies what pre-processing should occur                                                    \r\n * tuneLength: it defines the total number of parameter combinations that will be evaluated                     \r\n\r\n```{r createModels, include=FALSE}\r\ncreateModels \u003c- function(formula, \r\n                         data, \r\n                         methods, \r\n                         ctrl, \r\n                         preProcess = NULL,\r\n                         tuneLength = 1) {\r\n  \r\n  # Suppresses the warning messages\r\n  options(warn=-1)\r\n  \r\n  # Sets metric and seed\r\n  metric \u003c- \u0022ROC\u0022\r\n  seed   \u003c- 54321\r\n  \r\n  # Transforms the variable into type formula\r\n  formula \u003c- as.formula(formula)\r\n  \r\n  # Creates lists to store models\r\n  modelsOri    \u003c- list()\r\n  modelsUp     \u003c- list()  \r\n  modelsDown   \u003c- list()\r\n  modelsRose   \u003c- list()\r\n  modelsSmote  \u003c- list()\r\n  \r\n  # Creates a dataframe to store the performances\r\n  score \u003c- data.frame(method=character(),\r\n                      score=numeric(),\r\n                      model=character(), \r\n                      stringsAsFactors=FALSE)\r\n  \r\n  # Generates 5 models (original, up, down, ROSE and SMOTE) for each informed method\r\n  for (i in methods) {\r\n    \r\n    tryCatch({\r\n      \r\n      cat(\u0022METHOD: \u0022, i, \u0027\\n\\n\u0027)\r\n      \r\n      #################################################################\r\n      #         MODEL 1 - Original - No resampling technique          #\r\n      #################################################################\r\n      ctrl$sampling \u003c- NULL\r\n      nameOri \u003c- paste0(i,\u0022.ori\u0022)\r\n      set.seed(seed)\r\n      modelsOri[[nameOri]] \u003c- train(form = formula, \r\n                                    data = data, \r\n                                    method = i, \r\n                                    metric = metric,\r\n                                    preProcess = preProcess,\r\n                                    tuneLength = tuneLength,\r\n                                    trControl = ctrl)\r\n      cat(\u0027Importance of variables \\n\\n\u0027)\r\n      tryCatch({\r\n        importanceOri \u003c- varImp(modelsOri[[nameOri]], scale=FALSE)\r\n        print(importanceOri)\r\n        # Displays the plot with the importance of the variables\r\n        print(plot(importanceOri))\r\n      }, error=function(e){\r\n        cat(\u0022It wasn\u0027t possible to verify the importance of the variables: \u0022,i, \u0022 - ERROR :\u0022,conditionMessage(e),\u0022\\n\u0022)})\r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - ORIGINAL MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsOri[[nameOri]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameOri,\u0022.model.rds\u0022)\r\n      saveRDS(modelsOri[[nameOri]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameOri,\r\n                                     getTrainPerf(modelsOri[[nameOri]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      #################################################################\r\n      #              MODEL 2 - UP (Oversampling)                      #\r\n      #################################################################\r\n      ctrl$sampling \u003c- \u0022up\u0022\r\n      \r\n      nameUp \u003c- paste0(i,\u0022.up\u0022)\r\n      set.seed(seed)\r\n      modelsUp[[nameUp]] \u003c- train(form = formula, \r\n                                  data = data, \r\n                                  method = i, \r\n                                  metric = metric,\r\n                                  preProcess = preProcess,\r\n                                  tuneLength = tuneLength,\r\n                                  trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - UP MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsUp[[nameUp]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameUp,\u0022.model.rds\u0022)\r\n      saveRDS(modelsUp[[nameUp]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameUp,\r\n                                     getTrainPerf(modelsUp[[nameUp]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      #################################################################\r\n      #                 MODEL 3 - DOWN (Undersampling)                #\r\n      #################################################################\r\n      ctrl$sampling \u003c- \u0022down\u0022\r\n      \r\n      nameDown \u003c- paste0(i,\u0022.down\u0022)\r\n      set.seed(seed)\r\n      modelsDown[[nameDown]] \u003c- train(form = formula, \r\n                                      data = data, \r\n                                      method = i,\r\n                                      metric = metric,\r\n                                      preProcess = preProcess,\r\n                                      tuneLength = tuneLength,\r\n                                      trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - DOWN MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsDown[[nameDown]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameDown,\u0022.model.rds\u0022)\r\n      saveRDS(modelsDown[[nameDown]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameDown,\r\n                                     getTrainPerf(modelsDown[[nameDown]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      \r\n      ##########################################################################\r\n      #              MODEL 4 - ROSE (Random Over-Sampling Examples)            #\r\n      ##########################################################################\r\n      ctrl$sampling \u003c- \u0022rose\u0022\r\n      \r\n      nameRose \u003c- paste0(i,\u0022.rose\u0022)\r\n      set.seed(seed)\r\n      modelsRose[[nameRose]] \u003c- train(form = formula, \r\n                                      data = data, \r\n                                      method = i, \r\n                                      metric = metric,\r\n                                      preProcess = preProcess,\r\n                                      tuneLength = tuneLength,\r\n                                      trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - ROSE MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsRose[[nameRose]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameRose,\u0022.model.rds\u0022)\r\n      saveRDS(modelsRose[[nameRose]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameRose,\r\n                                     getTrainPerf(modelsRose[[nameRose]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      #######################################################################################\r\n      #             MODEL 5 - SMOTE (Synthetic Minority Oversampling Technique)             #\r\n      #######################################################################################\r\n      ctrl$sampling \u003c- \u0022smote\u0022\r\n      \r\n      nameSmote \u003c- paste0(i,\u0022.smote\u0022)\r\n      set.seed(seed)\r\n      modelsSmote[[nameSmote]] \u003c- train(form = formula, \r\n                                        data = data, \r\n                                        method = i, \r\n                                        metric = metric,\r\n                                        preProcess = preProcess,\r\n                                        tuneLength = tuneLength,\r\n                                        trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - SMOTE MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsSmote[[nameSmote]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameSmote,\u0022.model.rds\u0022)\r\n      saveRDS(modelsSmote[[nameSmote]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameSmote,\r\n                                     getTrainPerf(modelsSmote[[nameSmote]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      ###################################################################\r\n      #  Evaluates the result of the original model and the resamplings #\r\n      ###################################################################\r\n      models \u003c- list(original = modelsOri[[nameOri]],\r\n                     down = modelsDown[[nameDown]],\r\n                     up = modelsUp[[nameUp]],\r\n                     smote = modelsSmote[[nameSmote]],\r\n                     rose = modelsRose[[nameRose]])\r\n      \r\n      #Remove null values, if exists\r\n      models[sapply(models, is.null)] \u003c- NULL\r\n      \r\n      cat(\u0022EVALUATE THE MODELS USING THE ROC METRIC \\n\\n\u0022)\r\n      resampling \u003c- resamples(models)\r\n      print(summary(resampling, metric = metric))\r\n      \r\n      cat(\u0022DOTPLOT \\n\\n\u0022)\r\n      scales \u003c- list(x=list(relation=\u0022free\u0022), y=list(relation=\u0022free\u0022))\r\n      print(dotplot(resampling, scales=scales, main=paste(\u0022Evaluating all models of the method\u0022,i)))\r\n      \r\n    }, error=function(e){\r\n      cat(\u0022It wasn\u0027t possible to train the model \u0022, i, \u0022 - ERROR :\u0022,conditionMessage(e), \u0022\\n\u0022)          \r\n      \r\n    })\r\n    \r\n  }\r\n  \r\n  ################################################################\r\n  #                   Evaluate all models                        #\r\n  ################################################################\r\n  \r\n  # Concatenates all generated models\r\n  modelsList \u003c- c(modelsOri,modelsDown,modelsUp,modelsSmote,modelsRose)\r\n  \r\n  # Only if you have more than one method does the overall evaluation\r\n  if(length(modelsOri) \u003e 1){\r\n    \r\n    cat(\u0022\\n\\n EVALUATING THE RESULT OF ALL METHODS AND MODELS \\n\\n\u0022)\r\n    \r\n    resampling \u003c- resamples(modelsList)\r\n    print(summary(resampling, metric = metric))\r\n    \r\n    scales \u003c- list(x=list(relation=\u0022free\u0022), y=list(relation=\u0022free\u0022))\r\n    print(dotplot(resampling, scales=scales, main=\u0022Evaluating all methods used\u0022))\r\n  }\r\n  \r\n  cat(\u0022\\n\\n MODEL WITH THE BEST PERFORMANCE: \\n\\n\u0022)\r\n  best \u003c- score %\u003e% top_n(1, score) %\u003e% head(1)\r\n  print(best)\r\n  \r\n  # Delete all models except winner\r\n  rdsFiles = list.files(pattern=\u0027.rds\u0027)\r\n  rdsFiles \u003c- rdsFiles [! rdsFiles %in% best$model]\r\n  file.remove(rdsFiles)\r\n  # Returns the name of the best model\r\n  return(best$model)\r\n  \r\n}\r\n```\r\n\r\n# Exploratory Analysis and Data Transformation\r\n\r\n* Checks the type of columns and the first 5 lines:\r\n\r\nAnalyzing the column \u0022Name\u0022 we can see in the name the title of the person, e.g. in the name \u0022Kelly, Mr. James\u0022 the title is \u0022Mr\u0022. A new variable will be created for title analysis.\r\n\r\n```{r strTrain}\r\n## Train\r\nglimpse(trainOri)\r\nsapply(trainOri, class)\r\nhead(trainOri,5)\r\n## Test\r\nglimpse(testOri)\r\nsapply(testOri, class)\r\nhead(testOri,5)\r\n```\r\n\r\n* Check the statistics\r\n\r\nWe can verify that there are NA values in the columns \u0022Age\u0022, \u0022Fare\u0022, \u0022Cabin\u0022 and \u0022Embarked\u0022:\r\n\r\n* Train: Age, Cabin, Embarked  \r\n* Test: Age, Cabin, Fare\r\n\r\n```{r summary}\r\nsummary(trainOri)\r\nsummary(testOri)\r\n```\r\n\r\n* Check the percentage of NAs\r\n\r\nThe percentage of NAs in the \u0022Cabin\u0022 column is greater than 70%, so I believe this column should be deleted.\r\n\r\n```{r checkNA}\r\n# Train\r\nsapply(trainOri, function(x) round(sum(is.na(x))/nrow(trainOri) * 100,1))\r\n# Test\r\nsapply(testOri, function(x) round(sum(is.na(x))/nrow(testOri) * 100,1))\r\n```\r\n\r\n* Checks if the records are balanced\r\n\r\nWe can see that the classes are unbalanced, the number of people who did not survive the accident is greater than 61%. We will try resampling techniques to see if the model\u0027s performance will improve.\r\n\r\n```{r balanc}\r\ncbind(freq=table(trainOri$Survived), percent=round(prop.table(table(trainOri$Survived))*100,1))\r\n```\r\n\r\n* Checks the unique records for each attribute\r\n\r\n```{r unique}\r\n# Train\r\napply(trainOri,2,function(x) length(unique(x)))\r\n# Test\r\napply(trainOri,2,function(x) length(unique(x)))\r\n```\r\n\r\n# Combine data\r\n\r\nThe datasets will be joined to facilitate the processing of data.\r\n\r\n```{r fullData}\r\ntestOri$Survived \u003c- NA;\r\nfullData \u003c- rbind(trainOri, testOri)\r\ntrainIdx \u003c- seq(nrow(trainOri)) #Training data index\r\n```\r\n\r\n# Data visualizations\r\n\r\n* Number of survivors by sex\r\n\r\nWe can observe that the number of women who survived is greater than the number of men.\r\n\r\n```{r plotSexSurvived}\r\nggplot(fullData[trainIdx,], aes(Sex, fill = factor(Survived))) + \r\n  geom_bar(stat = \u0022count\u0022, position = \u0027dodge\u0027)+\r\n  xlab(\u0022Sex\u0022) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022Survived\u0022) + \r\n  ggtitle(\u0022Sex X Survived\u0022)\r\n```\r\n\r\n* Number of survivors per class\r\n\r\nWe can observe that the number of survivors is greater when the passenger is in the first class.\r\n\r\n```{r plotPclassSurvived}\r\nggplot(fullData[trainIdx,], aes(Pclass, fill = factor(Survived))) + \r\n  geom_bar(stat = \u0022count\u0022)+\r\n  xlab(\u0022Pclass\u0022) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022Survived\u0022) + \r\n  ggtitle(\u0022Pclass X Survived\u0022)\r\n```\r\n\r\n* Generates a histogram of each attribute\r\n\r\n```{r hist}\r\nnumberCols \u003c- dplyr::select_if(trainOri, is.numeric)\r\npar(mfrow=c(2,2))\r\nfor(i in 1:7) {\r\n  hist(numberCols[,i], main=names(numberCols)[i], xlab = \u0022\u0022)\r\n}\r\n```\r\n\r\n* Generates a boxplot for each attribute\r\n\r\nWe can observe some outliers, however no treatment will be performed.\r\n\r\n```{r boxplot}\r\npar(mfrow=c(2,2))\r\nfor(i in 1:7) {\r\n  boxplot(numberCols[,i], main=names(numberCols)[i])\r\n}\r\n```\r\n\r\n* Generates a barplot of each attribute per class\r\n\r\n```{r barplot}\r\npar(mfrow=c(2,2))\r\nfor(i in 1:7) {\r\n  barplot(table(numberCols$Survived,numberCols[,i]), \r\n          main=names(numberCols)[i], \r\n          legend.text=unique(numberCols$Survived))\r\n}\r\n```\r\n\r\n# Filling NA values\r\n\r\nThe \u0022Age\u0022 and \u0022Fare\u0022 columns will be filled with the average per class and the column \u0022Embarked\u0022 will be filled with the highest occurrence of values.\r\n\r\n```{r removeNAs}\r\n#Age and Fare\r\nfullTemp \u003c- fullData %\u003e% \r\n            group_by(Pclass) %\u003e%\r\n            mutate(Age = ifelse(is.na(Age), round(mean(Age, na.rm = TRUE)), Age)) %\u003e%\r\n            mutate(Fare = ifelse(is.na(Fare), round(mean(Fare, na.rm = TRUE)), Fare))\r\nfullData$Age \u003c- fullTemp$Age\r\nfullData$Fare \u003c- fullTemp$Fare\r\n#Embarked \r\nmaxEmbarked \u003c- names(sort(table(fullData$Embarked),decreasing = T)[1])\r\nfullData$Embarked[is.na(fullData$Embarked)] \u003c- maxEmbarked\r\n```\r\n\r\n# One-Hot-Encoding\r\n\r\nCategorical variables will be transformed, one of the most common ways to make this transformation is to one-hot encode the categorical features, especially when there does not exist a natural ordering between the categories (e.g. a feature ‘Country’ with names such as ‘Brazil’, ‘France’, ‘Japan’, etc.).\r\n\r\n```{r ohe}\r\n# Sex\r\ndummies \u003c- predict(dummyVars(~ Sex, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n# Embarked\r\ndummies \u003c- predict(dummyVars(~ Embarked, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n# Pclass\r\nfullData$Pclass \u003c- factor(fullData$Pclass)\r\ndummies \u003c- predict(dummyVars(~ Pclass, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n```\r\n\r\n# New variables\r\n\r\nTwo new categorical variables will be created. One to store the title of the person and another to know the type of the family.\r\n\r\n```{r newVars}\r\n# Title\r\nfullData$Title \u003c- gsub(\u0027(.*, )|(\\\\..*)\u0027, \u0027\u0027, fullData$Name)\r\n## Create only one category for similar titles\r\nofficer \u003c- c(\u0027Capt\u0027, \u0027Col\u0027, \u0027Don\u0027, \u0027Dr\u0027, \u0027Major\u0027, \u0027Rev\u0027)\r\nroyalty \u003c- c(\u0027Dona\u0027, \u0027Lady\u0027, \u0027the Countess\u0027,\u0027Sir\u0027, \u0027Jonkheer\u0027)\r\nfullData$Title[fullData$Title == \u0027Mlle\u0027] \u003c- \u0027Miss\u0027 \r\nfullData$Title[fullData$Title == \u0027Ms\u0027]   \u003c- \u0027Miss\u0027 \r\nfullData$Title[fullData$Title == \u0027Mme\u0027]  \u003c- \u0027Mrs\u0027 \r\nfullData$Title[fullData$Title %in% royalty]  \u003c- \u0027Royalty\u0027\r\nfullData$Title[fullData$Title %in% officer]  \u003c- \u0027Officer\u0027\r\n## One-hot-enconding\r\nfullData$Title \u003c- factor(fullData$Title)\r\ndummies \u003c- predict(dummyVars(~ Title, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n#FamilyType\r\nfullData$FamilySize \u003c- fullData$SibSp + fullData$Parch + 1\r\nfullData$FamilyType[fullData$FamilySize == 1] \u003c- \u0027A\u0027 #Alone\r\nfullData$FamilyType[fullData$FamilySize \u003e 1 \u0026 fullData$FamilySize \u003c 5] \u003c- \u0027S\u0027 #Small\r\nfullData$FamilyType[fullData$FamilySize \u003e= 5] \u003c- \u0027B\u0027 #Big\r\n## One-hot-enconding\r\nfullData$FamilyType \u003c- factor(fullData$FamilyType)\r\ndummies \u003c- predict(dummyVars(~ FamilyType, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n```\r\n\r\n* Generating plots with new variables\r\n\r\nThe new variables are related to the target variable.\r\n\r\n```{r plotTitleSurvived}\r\nggplot(fullData[trainIdx,], aes(Title,fill = factor(Survived))) +\r\n  geom_bar(stat = \u0022count\u0022)+\r\n  xlab(\u0027Title\u0027) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022 Survived\u0022) + \r\n  ggtitle(\u0022Title X Survived\u0022)\r\n```\r\n\r\n```{r plotFamilyTypeSurvived}\r\nggplot(fullData[trainIdx,], aes(FamilyType,fill = factor(Survived))) +\r\n  geom_bar(stat = \u0022count\u0022)+\r\n  xlab(\u0027FamilyType\u0027) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022 Survived\u0022) + \r\n  ggtitle(\u0022FamilyType X Survived\u0022)\r\n```\r\n\r\n# Remove columns \r\n\r\nUnused columns will be deleted.\r\n\r\n```{r removeColumns}\r\nfullData$Ticket \u003c- NULL\r\nfullData$Cabin \u003c- NULL\r\nfullData$Sex \u003c- NULL\r\nfullData$Embarked \u003c- NULL\r\nfullData$Pclass \u003c- NULL\r\nfullData$Title \u003c- NULL\r\nfullData$Name \u003c- NULL\r\nfullData$FamilyType \u003c- NULL\r\nfullData$FamilySize \u003c- NULL\r\nglimpse(fullData)\r\n```\r\n\r\n# Correlation\r\n\r\n* Checks the correlation between the variables\r\n\r\n```{r correlacao, fig.width = 17, fig.height = 15, fig.align = \u0022center\u0022}\r\ncor(fullData[trainIdx,]) %\u003e% corrplot(addCoef.col = \u0022grey\u0022, number.cex = 1.4)\r\n```\r\n\r\n# Split data into training and validation\r\n\r\nIt was used 70% for training and 30% for validation.\r\n\r\n```{r split}\r\n# Selecting the training variables, the \u0022PassengerId\u0022 will not be used because it is just a ID\r\ntrainData \u003c- subset(fullData[trainIdx, ], select=-PassengerId) \r\n# Changing the target variable to factor\r\ntrainData$Survived \u003c- factor(trainData$Survived)\r\nlevels(trainData$Survived) \u003c- c(\u0022no\u0022, \u0022yes\u0022)\r\nprint(table(trainData$Survived, useNA = \u0022always\u0022))\r\n# Divide data into training and validation\r\nindex \u003c- createDataPartition(y = trainData$Survived, p = 0.7, list = FALSE)\r\ntrain \u003c- trainData[index,]\r\nvalid \u003c- trainData[-index,]\r\n```\r\n\r\n# Training the model\r\n\r\nThis is the main purpose of the script, running multiple models and choosing the one that got the best performance in training to predict test data.\r\n\r\nOnly a few algorithms were executed, but this script can be adapted to use several others, Caret currently has 238 algorithms. You can run this code \u0022names(getModelInfo())\u0022 or access the link below for more details.\r\n\r\nSee: http://topepo.github.io/caret/available-models.html\r\n\r\n```{r train}\r\n# Choose the models that will be trained\r\nmethods \u003c- list(\u0022knn\u0022,\u0022nb\u0022,\u0022glmboost\u0022)\r\n# Set the variables for the function \u0022createModels\u0022\r\nformula \u003c- \u0022Survived ~ .\u0022\r\npreProcess \u003c- c(\u0022center\u0022, \u0022scale\u0022)          \r\ntuneLength \u003c- 25                             \r\nctrl \u003c- trainControl(method = \u0022repeatedcv\u0022,\r\n                     number = 10,\r\n                     repeats = 3, \r\n                     allowParallel = TRUE,\r\n                     summaryFunction = twoClassSummary,\r\n                     classProbs = TRUE)\r\n# Train the models\r\nnameModel \u003c- createModels(formula,train,methods,ctrl,preProcess)\r\ncat(\u0022Best model: \u0022,nameModel)\r\n```\r\n\r\n# Running the model in the validation data\r\n\r\nThe model that obtained the best performance was used in the validation data and to predict the test data.\r\n\r\n```{r valid }\r\n# Recover saved model\r\nbestModel \u003c- readRDS(paste0(\u0022./\u0022,nameModel))\r\n# Check the best of the hyperparameters\r\nprint(bestModel$bestTune)\r\n# Testing the model in the validation data\r\nxValid \u003c- subset(valid, select=-Survived)\r\nyValid \u003c- valid$Survived\r\npredValues \u003c- predict(object = bestModel, \r\n                       newdata = xValid, \r\n                       type = \u0022raw\u0022)\r\nhead(predValues,5)\r\n# Generates confusion matrix with positive class (yes)\r\nconfusionMatrix(predValues,yValid,positive = \u0022yes\u0022)\r\n# Returns the probability of the positive class (yes)\r\npredProbs \u003c- predict(object = bestModel, newdata = xValid, type=\u0022prob\u0022)[,2] \r\nhead(predProbs)\r\npredPos \u003c- predProbs[yValid==\u0022yes\u0022]  #prediction for true positives\r\npredNeg \u003c- predProbs[yValid==\u0022no\u0022]   #prediction for true negatives\r\n# Generates a plot showing the ROC curve and PR\r\n# ROC Curve    \r\nroc \u003c- PRROC::roc.curve(scores.class0 = predPos, \r\n                        scores.class1 = predNeg, \r\n                        curve = T)\r\nprint(roc)\r\nplot(roc)\r\n# PR Curve\r\npr \u003c- PRROC::pr.curve(scores.class0 = predPos, \r\n                      scores.class1 = predNeg, \r\n                      curve = T)\r\nprint(pr)\r\nplot(pr)\r\n```\r\n\r\n# Generating predictions for test data\r\n\r\n```{r test }\r\n# Selects the columns of the dataframe that will be used\r\ntestData \u003c- subset(fullData[-trainIdx, ], select=-Survived) \r\nprint(head(testData,5))\r\nprint(str(testData))\r\n# Testing the model in test data\r\npredTestValues \u003c- predict(object = bestModel, \r\n                          newdata = testData[,-1], #The PassengerId will not be used\r\n                          type = \u0022raw\u0022)\r\nprint(head(predTestValues,5))\r\n# Converts data to a dataframe\r\npredTest \u003c- as.data.frame(predTestValues)\r\nprint(head(predTest,10))\r\n```\r\n\r\n# Submitting data for Kaggle validation\r\n\r\n```{r submit}\r\n# Creates the object that will store the data that will be submitted\r\nsub \u003c- data.table(PassengerId = testData$PassengerId, Survived = NA)\r\nsub$Survived = as.numeric(ifelse(predTest == \u0022no\u0022, 0, 1))\r\nprint(head(sub,10))\r\n# Save the CSV file\r\nnameFile \u003c- paste0(nameModel,\u0022.submission.csv\u0022)\r\nfwrite(sub, nameFile)\r\n# Informs the end date/time of the process\r\ndateFin \u003c- Sys.time()\r\ncat(\u0022\\n End of execution: \u0022, as.character(dateFin))\r\n```","dateCreated":"2019-03-26T18:31:09.6404211Z"},"kernelRun":{"id":12103463,"kernelId":3387288,"status":"complete","type":"batch","sourceType":"script","language":"rmarkdown","title":"Titanic New View","dateCreated":"2019-03-26T18:31:09.84Z","dateEvaluated":"2019-03-26T18:31:10.21Z","workerContainerPort":null,"workerUptimeSeconds":143930,"workerIPAddress":"172.21.6.146   ","scriptLanguageId":5,"scriptLanguageName":"RMarkdown","renderedOutputUrl":"https://www.kaggleusercontent.com/kf/12103463/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..8XfavJavSsd5m3m5guPU8A.Jbb3oRkV3SBTran7IZYk4jn7KlKUwZvZBxcWL3EZPS1kuAd35qRt1oQgqCP0yq7mOLaf8SzKWMn60VJtUyhJnk6CDcsfz7sSuV0k0xfyUEp9fq40dHGO35-VfbgtPTIGRcnmieMEvLJW-xYvKACclA.CNlreymvCjvB9d1K9v2Gpw/__results__.html","commit":{"id":237463460,"settings":{"dockerImageVersionId":null,"dataSources":[{"sourceType":"Competition","sourceId":3136,"databundleVersionId":null}],"sourceType":"script","language":"rmarkdown","isGpuEnabled":true,"isInternetEnabled":false},"source":"---\r\ntitle: \u0022Titanic Competition - Automating model selection using Caret\u0022\r\nauthor: \u0022Cristina Santana Souza\u0022\r\ndate: \u0022March 2019\u0022\r\noutput:\r\n  html_document:\r\n    number_sections: true # Sets an automatic number for each item\r\n    code_folding: show    # Shows the source code by default\r\n    toc: true             # Defines a summary for the document\r\n    fig_width: 10         # Standard figure width\r\n---\r\n\r\n```{r setup, include=FALSE}\r\nknitr::opts_chunk$set(echo = TRUE)\r\n```\r\n\r\n# Goal\r\n\r\nPredict which people will survive and create an automated process to test multiple models simultaneously and choose the one that got the best performance.\r\n\r\n# Fields\r\n\r\n* PassengerId: Id given to each traveler on the boat\r\n* Survived: 0 = No, 1 = Yes\r\n* Pclass: Passenger class, it has three possible values: 1,2,3 (first, second and third class)\r\n* Name: Name of the passenger\r\n* Sex: Sex of the passenger\r\n* Age: Age of the passenger\r\n* SibSp: Number of siblings and spouses traveling with the passenger\r\n* Parch: Number of parents and children traveling with the passenger\r\n* Ticket: Ticket number\r\n* Fare: Ticket fare\r\n* Cabin: Cabin number\r\n* Embarked: The embarkation, three possible values: S,C,Q\r\n\r\n```{r ini}\r\n# Informs the process start date/time\r\ndateIni \u003c- Sys.time()\r\ncat(\u0022\\n Start of execution: \u0022, as.character(dateIni))\r\n```\r\n\r\n```{r libraries, include=FALSE}\r\n# Lists the libraries that will be used\r\nlibs = c(\u0022data.table\u0022,\u0022ggplot2\u0022,\u0022randomForest\u0022,\u0022ROSE\u0022,\u0022DMwR\u0022,\u0022corrplot\u0022,\u0022caret\u0022,\r\n         \u0022xgboost\u0022,\u0022e1071\u0022,\u0022PRROC\u0022,\u0022klaR\u0022,\u0022dplyr\u0022,\u0022tidyr\u0022)\r\n# Loads or installs the package\r\nfor(i in libs)\r\n{\r\n  if(i %in% row.names(installed.packages()) == FALSE){\r\n    cat(\u0022Load/install the library: \u0022, i, \u0022\\n\\n\u0022)\r\n    install.packages(i, repos = \u0022http://cran.us.r-project.org\u0022)\r\n    library(i, character.only = TRUE)\r\n  } else {\r\n    cat(\u0022Load the library: \u0022, i, \u0022\\n\\n\u0022)\r\n    library(i, character.only = TRUE)\r\n  }\r\n}\r\n```\r\n\r\n# Load datasets\r\n\r\n```{r load}\r\ntrainPath \u003c- \u0022../input/train.csv\u0022\r\ntestPath  \u003c- \u0022../input/test.csv\u0022\r\ntrainOri \u003c- read.csv(trainPath, na.strings = c(\u0022NA\u0022,\u0022NaN\u0022, \u0022\u0022))\r\ntestOri \u003c- read.csv(testPath, na.strings = c(\u0022NA\u0022,\u0022NaN\u0022, \u0022\u0022))\r\n```\r\n\r\n# Function \u0022createModels\u0022\r\n\r\nThe \u0022createModels\u0022 function was created to facilitate the training of the model, it generates five models according to the algorithm and the parameters informed, analyzes the most important variables, generates a ROC chart comparing the models and informs which one obtained the best performance.\r\n\r\n**Models:**\r\n  \r\n * Model 1 - Original - No resampling technique\r\n * Model 2 - Oversampling: this technique includes elements in the minority class\r\n * Model 3 - Undersampling: this technique excludes elements in the majority class\r\n * Model 4 - Random Oversampling Examples: also called ROSE, it generates artificial balanced samples\r\n * Model 5 - Synthetic Minority Oversampling Technique: also called SMOTE, it creates artificial examples by interpolation\r\n\r\n**Parameters:**\r\n\r\n * formula: formula with the values of X and Y that will be used to generate the model\r\n * data: dataframe with the data that will be trained                                    \r\n * methods: name of the algorithms that will be used, example \u0022knn\u0022,\u0022rf\u0022\r\n * ctrl: informs the control parameters                                            \r\n * preProcess: it specifies what pre-processing should occur                                                    \r\n * tuneLength: it defines the total number of parameter combinations that will be evaluated                     \r\n\r\n```{r createModels, include=FALSE}\r\ncreateModels \u003c- function(formula, \r\n                         data, \r\n                         methods, \r\n                         ctrl, \r\n                         preProcess = NULL,\r\n                         tuneLength = 1) {\r\n  \r\n  # Suppresses the warning messages\r\n  options(warn=-1)\r\n  \r\n  # Sets metric and seed\r\n  metric \u003c- \u0022ROC\u0022\r\n  seed   \u003c- 54321\r\n  \r\n  # Transforms the variable into type formula\r\n  formula \u003c- as.formula(formula)\r\n  \r\n  # Creates lists to store models\r\n  modelsOri    \u003c- list()\r\n  modelsUp     \u003c- list()  \r\n  modelsDown   \u003c- list()\r\n  modelsRose   \u003c- list()\r\n  modelsSmote  \u003c- list()\r\n  \r\n  # Creates a dataframe to store the performances\r\n  score \u003c- data.frame(method=character(),\r\n                      score=numeric(),\r\n                      model=character(), \r\n                      stringsAsFactors=FALSE)\r\n  \r\n  # Generates 5 models (original, up, down, ROSE and SMOTE) for each informed method\r\n  for (i in methods) {\r\n    \r\n    tryCatch({\r\n      \r\n      cat(\u0022METHOD: \u0022, i, \u0027\\n\\n\u0027)\r\n      \r\n      #################################################################\r\n      #         MODEL 1 - Original - No resampling technique          #\r\n      #################################################################\r\n      ctrl$sampling \u003c- NULL\r\n      nameOri \u003c- paste0(i,\u0022.ori\u0022)\r\n      set.seed(seed)\r\n      modelsOri[[nameOri]] \u003c- train(form = formula, \r\n                                    data = data, \r\n                                    method = i, \r\n                                    metric = metric,\r\n                                    preProcess = preProcess,\r\n                                    tuneLength = tuneLength,\r\n                                    trControl = ctrl)\r\n      cat(\u0027Importance of variables \\n\\n\u0027)\r\n      tryCatch({\r\n        importanceOri \u003c- varImp(modelsOri[[nameOri]], scale=FALSE)\r\n        print(importanceOri)\r\n        # Displays the plot with the importance of the variables\r\n        print(plot(importanceOri))\r\n      }, error=function(e){\r\n        cat(\u0022It wasn\u0027t possible to verify the importance of the variables: \u0022,i, \u0022 - ERROR :\u0022,conditionMessage(e),\u0022\\n\u0022)})\r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - ORIGINAL MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsOri[[nameOri]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameOri,\u0022.model.rds\u0022)\r\n      saveRDS(modelsOri[[nameOri]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameOri,\r\n                                     getTrainPerf(modelsOri[[nameOri]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      #################################################################\r\n      #              MODEL 2 - UP (Oversampling)                      #\r\n      #################################################################\r\n      ctrl$sampling \u003c- \u0022up\u0022\r\n      \r\n      nameUp \u003c- paste0(i,\u0022.up\u0022)\r\n      set.seed(seed)\r\n      modelsUp[[nameUp]] \u003c- train(form = formula, \r\n                                  data = data, \r\n                                  method = i, \r\n                                  metric = metric,\r\n                                  preProcess = preProcess,\r\n                                  tuneLength = tuneLength,\r\n                                  trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - UP MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsUp[[nameUp]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameUp,\u0022.model.rds\u0022)\r\n      saveRDS(modelsUp[[nameUp]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameUp,\r\n                                     getTrainPerf(modelsUp[[nameUp]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      #################################################################\r\n      #                 MODEL 3 - DOWN (Undersampling)                #\r\n      #################################################################\r\n      ctrl$sampling \u003c- \u0022down\u0022\r\n      \r\n      nameDown \u003c- paste0(i,\u0022.down\u0022)\r\n      set.seed(seed)\r\n      modelsDown[[nameDown]] \u003c- train(form = formula, \r\n                                      data = data, \r\n                                      method = i,\r\n                                      metric = metric,\r\n                                      preProcess = preProcess,\r\n                                      tuneLength = tuneLength,\r\n                                      trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - DOWN MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsDown[[nameDown]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameDown,\u0022.model.rds\u0022)\r\n      saveRDS(modelsDown[[nameDown]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameDown,\r\n                                     getTrainPerf(modelsDown[[nameDown]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      \r\n      ##########################################################################\r\n      #              MODEL 4 - ROSE (Random Over-Sampling Examples)            #\r\n      ##########################################################################\r\n      ctrl$sampling \u003c- \u0022rose\u0022\r\n      \r\n      nameRose \u003c- paste0(i,\u0022.rose\u0022)\r\n      set.seed(seed)\r\n      modelsRose[[nameRose]] \u003c- train(form = formula, \r\n                                      data = data, \r\n                                      method = i, \r\n                                      metric = metric,\r\n                                      preProcess = preProcess,\r\n                                      tuneLength = tuneLength,\r\n                                      trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - ROSE MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsRose[[nameRose]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameRose,\u0022.model.rds\u0022)\r\n      saveRDS(modelsRose[[nameRose]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameRose,\r\n                                     getTrainPerf(modelsRose[[nameRose]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      #######################################################################################\r\n      #             MODEL 5 - SMOTE (Synthetic Minority Oversampling Technique)             #\r\n      #######################################################################################\r\n      ctrl$sampling \u003c- \u0022smote\u0022\r\n      \r\n      nameSmote \u003c- paste0(i,\u0022.smote\u0022)\r\n      set.seed(seed)\r\n      modelsSmote[[nameSmote]] \u003c- train(form = formula, \r\n                                        data = data, \r\n                                        method = i, \r\n                                        metric = metric,\r\n                                        preProcess = preProcess,\r\n                                        tuneLength = tuneLength,\r\n                                        trControl = ctrl)\r\n      \r\n      # Print the score\r\n      cat(\u0022\\n\\n PERFORMANCE - SMOTE MODEL: \\n\\n\u0022)\r\n      print(getTrainPerf(modelsSmote[[nameSmote]]))\r\n      \r\n      # Save the model\r\n      nameFile \u003c- paste0(nameSmote,\u0022.model.rds\u0022)\r\n      saveRDS(modelsSmote[[nameSmote]],paste0(\u0022./\u0022,nameFile))\r\n      \r\n      # Store the score in the dataframe\r\n      score[nrow(score) + 1,] = list(nameSmote,\r\n                                     getTrainPerf(modelsSmote[[nameSmote]])[, \u0022TrainROC\u0022],\r\n                                     nameFile)\r\n      \r\n      ###################################################################\r\n      #  Evaluates the result of the original model and the resamplings #\r\n      ###################################################################\r\n      models \u003c- list(original = modelsOri[[nameOri]],\r\n                     down = modelsDown[[nameDown]],\r\n                     up = modelsUp[[nameUp]],\r\n                     smote = modelsSmote[[nameSmote]],\r\n                     rose = modelsRose[[nameRose]])\r\n      \r\n      #Remove null values, if exists\r\n      models[sapply(models, is.null)] \u003c- NULL\r\n      \r\n      cat(\u0022EVALUATE THE MODELS USING THE ROC METRIC \\n\\n\u0022)\r\n      resampling \u003c- resamples(models)\r\n      print(summary(resampling, metric = metric))\r\n      \r\n      cat(\u0022DOTPLOT \\n\\n\u0022)\r\n      scales \u003c- list(x=list(relation=\u0022free\u0022), y=list(relation=\u0022free\u0022))\r\n      print(dotplot(resampling, scales=scales, main=paste(\u0022Evaluating all models of the method\u0022,i)))\r\n      \r\n    }, error=function(e){\r\n      cat(\u0022It wasn\u0027t possible to train the model \u0022, i, \u0022 - ERROR :\u0022,conditionMessage(e), \u0022\\n\u0022)          \r\n      \r\n    })\r\n    \r\n  }\r\n  \r\n  ################################################################\r\n  #                   Evaluate all models                        #\r\n  ################################################################\r\n  \r\n  # Concatenates all generated models\r\n  modelsList \u003c- c(modelsOri,modelsDown,modelsUp,modelsSmote,modelsRose)\r\n  \r\n  # Only if you have more than one method does the overall evaluation\r\n  if(length(modelsOri) \u003e 1){\r\n    \r\n    cat(\u0022\\n\\n EVALUATING THE RESULT OF ALL METHODS AND MODELS \\n\\n\u0022)\r\n    \r\n    resampling \u003c- resamples(modelsList)\r\n    print(summary(resampling, metric = metric))\r\n    \r\n    scales \u003c- list(x=list(relation=\u0022free\u0022), y=list(relation=\u0022free\u0022))\r\n    print(dotplot(resampling, scales=scales, main=\u0022Evaluating all methods used\u0022))\r\n  }\r\n  \r\n  cat(\u0022\\n\\n MODEL WITH THE BEST PERFORMANCE: \\n\\n\u0022)\r\n  best \u003c- score %\u003e% top_n(1, score) %\u003e% head(1)\r\n  print(best)\r\n  \r\n  # Delete all models except winner\r\n  rdsFiles = list.files(pattern=\u0027.rds\u0027)\r\n  rdsFiles \u003c- rdsFiles [! rdsFiles %in% best$model]\r\n  file.remove(rdsFiles)\r\n  # Returns the name of the best model\r\n  return(best$model)\r\n  \r\n}\r\n```\r\n\r\n# Exploratory Analysis and Data Transformation\r\n\r\n* Checks the type of columns and the first 5 lines:\r\n\r\nAnalyzing the column \u0022Name\u0022 we can see in the name the title of the person, e.g. in the name \u0022Kelly, Mr. James\u0022 the title is \u0022Mr\u0022. A new variable will be created for title analysis.\r\n\r\n```{r strTrain}\r\n## Train\r\nglimpse(trainOri)\r\nsapply(trainOri, class)\r\nhead(trainOri,5)\r\n## Test\r\nglimpse(testOri)\r\nsapply(testOri, class)\r\nhead(testOri,5)\r\n```\r\n\r\n* Check the statistics\r\n\r\nWe can verify that there are NA values in the columns \u0022Age\u0022, \u0022Fare\u0022, \u0022Cabin\u0022 and \u0022Embarked\u0022:\r\n\r\n* Train: Age, Cabin, Embarked  \r\n* Test: Age, Cabin, Fare\r\n\r\n```{r summary}\r\nsummary(trainOri)\r\nsummary(testOri)\r\n```\r\n\r\n* Check the percentage of NAs\r\n\r\nThe percentage of NAs in the \u0022Cabin\u0022 column is greater than 70%, so I believe this column should be deleted.\r\n\r\n```{r checkNA}\r\n# Train\r\nsapply(trainOri, function(x) round(sum(is.na(x))/nrow(trainOri) * 100,1))\r\n# Test\r\nsapply(testOri, function(x) round(sum(is.na(x))/nrow(testOri) * 100,1))\r\n```\r\n\r\n* Checks if the records are balanced\r\n\r\nWe can see that the classes are unbalanced, the number of people who did not survive the accident is greater than 61%. We will try resampling techniques to see if the model\u0027s performance will improve.\r\n\r\n```{r balanc}\r\ncbind(freq=table(trainOri$Survived), percent=round(prop.table(table(trainOri$Survived))*100,1))\r\n```\r\n\r\n* Checks the unique records for each attribute\r\n\r\n```{r unique}\r\n# Train\r\napply(trainOri,2,function(x) length(unique(x)))\r\n# Test\r\napply(trainOri,2,function(x) length(unique(x)))\r\n```\r\n\r\n# Combine data\r\n\r\nThe datasets will be joined to facilitate the processing of data.\r\n\r\n```{r fullData}\r\ntestOri$Survived \u003c- NA;\r\nfullData \u003c- rbind(trainOri, testOri)\r\ntrainIdx \u003c- seq(nrow(trainOri)) #Training data index\r\n```\r\n\r\n# Data visualizations\r\n\r\n* Number of survivors by sex\r\n\r\nWe can observe that the number of women who survived is greater than the number of men.\r\n\r\n```{r plotSexSurvived}\r\nggplot(fullData[trainIdx,], aes(Sex, fill = factor(Survived))) + \r\n  geom_bar(stat = \u0022count\u0022, position = \u0027dodge\u0027)+\r\n  xlab(\u0022Sex\u0022) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022Survived\u0022) + \r\n  ggtitle(\u0022Sex X Survived\u0022)\r\n```\r\n\r\n* Number of survivors per class\r\n\r\nWe can observe that the number of survivors is greater when the passenger is in the first class.\r\n\r\n```{r plotPclassSurvived}\r\nggplot(fullData[trainIdx,], aes(Pclass, fill = factor(Survived))) + \r\n  geom_bar(stat = \u0022count\u0022)+\r\n  xlab(\u0022Pclass\u0022) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022Survived\u0022) + \r\n  ggtitle(\u0022Pclass X Survived\u0022)\r\n```\r\n\r\n* Generates a histogram of each attribute\r\n\r\n```{r hist}\r\nnumberCols \u003c- dplyr::select_if(trainOri, is.numeric)\r\npar(mfrow=c(2,2))\r\nfor(i in 1:7) {\r\n  hist(numberCols[,i], main=names(numberCols)[i], xlab = \u0022\u0022)\r\n}\r\n```\r\n\r\n* Generates a boxplot for each attribute\r\n\r\nWe can observe some outliers, however no treatment will be performed.\r\n\r\n```{r boxplot}\r\npar(mfrow=c(2,2))\r\nfor(i in 1:7) {\r\n  boxplot(numberCols[,i], main=names(numberCols)[i])\r\n}\r\n```\r\n\r\n* Generates a barplot of each attribute per class\r\n\r\n```{r barplot}\r\npar(mfrow=c(2,2))\r\nfor(i in 1:7) {\r\n  barplot(table(numberCols$Survived,numberCols[,i]), \r\n          main=names(numberCols)[i], \r\n          legend.text=unique(numberCols$Survived))\r\n}\r\n```\r\n\r\n# Filling NA values\r\n\r\nThe \u0022Age\u0022 and \u0022Fare\u0022 columns will be filled with the average per class and the column \u0022Embarked\u0022 will be filled with the highest occurrence of values.\r\n\r\n```{r removeNAs}\r\n#Age and Fare\r\nfullTemp \u003c- fullData %\u003e% \r\n            group_by(Pclass) %\u003e%\r\n            mutate(Age = ifelse(is.na(Age), round(mean(Age, na.rm = TRUE)), Age)) %\u003e%\r\n            mutate(Fare = ifelse(is.na(Fare), round(mean(Fare, na.rm = TRUE)), Fare))\r\nfullData$Age \u003c- fullTemp$Age\r\nfullData$Fare \u003c- fullTemp$Fare\r\n#Embarked \r\nmaxEmbarked \u003c- names(sort(table(fullData$Embarked),decreasing = T)[1])\r\nfullData$Embarked[is.na(fullData$Embarked)] \u003c- maxEmbarked\r\n```\r\n\r\n# One-Hot-Encoding\r\n\r\nCategorical variables will be transformed, one of the most common ways to make this transformation is to one-hot encode the categorical features, especially when there does not exist a natural ordering between the categories (e.g. a feature ‘Country’ with names such as ‘Brazil’, ‘France’, ‘Japan’, etc.).\r\n\r\n```{r ohe}\r\n# Sex\r\ndummies \u003c- predict(dummyVars(~ Sex, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n# Embarked\r\ndummies \u003c- predict(dummyVars(~ Embarked, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n# Pclass\r\nfullData$Pclass \u003c- factor(fullData$Pclass)\r\ndummies \u003c- predict(dummyVars(~ Pclass, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n```\r\n\r\n# New variables\r\n\r\nTwo new categorical variables will be created. One to store the title of the person and another to know the type of the family.\r\n\r\n```{r newVars}\r\n# Title\r\nfullData$Title \u003c- gsub(\u0027(.*, )|(\\\\..*)\u0027, \u0027\u0027, fullData$Name)\r\n## Create only one category for similar titles\r\nofficer \u003c- c(\u0027Capt\u0027, \u0027Col\u0027, \u0027Don\u0027, \u0027Dr\u0027, \u0027Major\u0027, \u0027Rev\u0027)\r\nroyalty \u003c- c(\u0027Dona\u0027, \u0027Lady\u0027, \u0027the Countess\u0027,\u0027Sir\u0027, \u0027Jonkheer\u0027)\r\nfullData$Title[fullData$Title == \u0027Mlle\u0027] \u003c- \u0027Miss\u0027 \r\nfullData$Title[fullData$Title == \u0027Ms\u0027]   \u003c- \u0027Miss\u0027 \r\nfullData$Title[fullData$Title == \u0027Mme\u0027]  \u003c- \u0027Mrs\u0027 \r\nfullData$Title[fullData$Title %in% royalty]  \u003c- \u0027Royalty\u0027\r\nfullData$Title[fullData$Title %in% officer]  \u003c- \u0027Officer\u0027\r\n## One-hot-enconding\r\nfullData$Title \u003c- factor(fullData$Title)\r\ndummies \u003c- predict(dummyVars(~ Title, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n#FamilyType\r\nfullData$FamilySize \u003c- fullData$SibSp + fullData$Parch + 1\r\nfullData$FamilyType[fullData$FamilySize == 1] \u003c- \u0027A\u0027 #Alone\r\nfullData$FamilyType[fullData$FamilySize \u003e 1 \u0026 fullData$FamilySize \u003c 5] \u003c- \u0027S\u0027 #Small\r\nfullData$FamilyType[fullData$FamilySize \u003e= 5] \u003c- \u0027B\u0027 #Big\r\n## One-hot-enconding\r\nfullData$FamilyType \u003c- factor(fullData$FamilyType)\r\ndummies \u003c- predict(dummyVars(~ FamilyType, data = fullData), newdata = fullData)\r\nfullData \u003c- cbind(fullData,dummies)\r\n```\r\n\r\n* Generating plots with new variables\r\n\r\nThe new variables are related to the target variable.\r\n\r\n```{r plotTitleSurvived}\r\nggplot(fullData[trainIdx,], aes(Title,fill = factor(Survived))) +\r\n  geom_bar(stat = \u0022count\u0022)+\r\n  xlab(\u0027Title\u0027) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022 Survived\u0022) + \r\n  ggtitle(\u0022Title X Survived\u0022)\r\n```\r\n\r\n```{r plotFamilyTypeSurvived}\r\nggplot(fullData[trainIdx,], aes(FamilyType,fill = factor(Survived))) +\r\n  geom_bar(stat = \u0022count\u0022)+\r\n  xlab(\u0027FamilyType\u0027) +\r\n  ylab(\u0022Count\u0022) +\r\n  scale_fill_discrete(name = \u0022 Survived\u0022) + \r\n  ggtitle(\u0022FamilyType X Survived\u0022)\r\n```\r\n\r\n# Remove columns \r\n\r\nUnused columns will be deleted.\r\n\r\n```{r removeColumns}\r\nfullData$Ticket \u003c- NULL\r\nfullData$Cabin \u003c- NULL\r\nfullData$Sex \u003c- NULL\r\nfullData$Embarked \u003c- NULL\r\nfullData$Pclass \u003c- NULL\r\nfullData$Title \u003c- NULL\r\nfullData$Name \u003c- NULL\r\nfullData$FamilyType \u003c- NULL\r\nfullData$FamilySize \u003c- NULL\r\nglimpse(fullData)\r\n```\r\n\r\n# Correlation\r\n\r\n* Checks the correlation between the variables\r\n\r\n```{r correlacao, fig.width = 17, fig.height = 15, fig.align = \u0022center\u0022}\r\ncor(fullData[trainIdx,]) %\u003e% corrplot(addCoef.col = \u0022grey\u0022, number.cex = 1.4)\r\n```\r\n\r\n# Split data into training and validation\r\n\r\nIt was used 70% for training and 30% for validation.\r\n\r\n```{r split}\r\n# Selecting the training variables, the \u0022PassengerId\u0022 will not be used because it is just a ID\r\ntrainData \u003c- subset(fullData[trainIdx, ], select=-PassengerId) \r\n# Changing the target variable to factor\r\ntrainData$Survived \u003c- factor(trainData$Survived)\r\nlevels(trainData$Survived) \u003c- c(\u0022no\u0022, \u0022yes\u0022)\r\nprint(table(trainData$Survived, useNA = \u0022always\u0022))\r\n# Divide data into training and validation\r\nindex \u003c- createDataPartition(y = trainData$Survived, p = 0.7, list = FALSE)\r\ntrain \u003c- trainData[index,]\r\nvalid \u003c- trainData[-index,]\r\n```\r\n\r\n# Training the model\r\n\r\nThis is the main purpose of the script, running multiple models and choosing the one that got the best performance in training to predict test data.\r\n\r\nOnly a few algorithms were executed, but this script can be adapted to use several others, Caret currently has 238 algorithms. You can run this code \u0022names(getModelInfo())\u0022 or access the link below for more details.\r\n\r\nSee: http://topepo.github.io/caret/available-models.html\r\n\r\n```{r train}\r\n# Choose the models that will be trained\r\nmethods \u003c- list(\u0022knn\u0022,\u0022nb\u0022,\u0022glmboost\u0022)\r\n# Set the variables for the function \u0022createModels\u0022\r\nformula \u003c- \u0022Survived ~ .\u0022\r\npreProcess \u003c- c(\u0022center\u0022, \u0022scale\u0022)          \r\ntuneLength \u003c- 25                             \r\nctrl \u003c- trainControl(method = \u0022repeatedcv\u0022,\r\n                     number = 10,\r\n                     repeats = 3, \r\n                     allowParallel = TRUE,\r\n                     summaryFunction = twoClassSummary,\r\n                     classProbs = TRUE)\r\n# Train the models\r\nnameModel \u003c- createModels(formula,train,methods,ctrl,preProcess)\r\ncat(\u0022Best model: \u0022,nameModel)\r\n```\r\n\r\n# Running the model in the validation data\r\n\r\nThe model that obtained the best performance was used in the validation data and to predict the test data.\r\n\r\n```{r valid }\r\n# Recover saved model\r\nbestModel \u003c- readRDS(paste0(\u0022./\u0022,nameModel))\r\n# Check the best of the hyperparameters\r\nprint(bestModel$bestTune)\r\n# Testing the model in the validation data\r\nxValid \u003c- subset(valid, select=-Survived)\r\nyValid \u003c- valid$Survived\r\npredValues \u003c- predict(object = bestModel, \r\n                       newdata = xValid, \r\n                       type = \u0022raw\u0022)\r\nhead(predValues,5)\r\n# Generates confusion matrix with positive class (yes)\r\nconfusionMatrix(predValues,yValid,positive = \u0022yes\u0022)\r\n# Returns the probability of the positive class (yes)\r\npredProbs \u003c- predict(object = bestModel, newdata = xValid, type=\u0022prob\u0022)[,2] \r\nhead(predProbs)\r\npredPos \u003c- predProbs[yValid==\u0022yes\u0022]  #prediction for true positives\r\npredNeg \u003c- predProbs[yValid==\u0022no\u0022]   #prediction for true negatives\r\n# Generates a plot showing the ROC curve and PR\r\n# ROC Curve    \r\nroc \u003c- PRROC::roc.curve(scores.class0 = predPos, \r\n                        scores.class1 = predNeg, \r\n                        curve = T)\r\nprint(roc)\r\nplot(roc)\r\n# PR Curve\r\npr \u003c- PRROC::pr.curve(scores.class0 = predPos, \r\n                      scores.class1 = predNeg, \r\n                      curve = T)\r\nprint(pr)\r\nplot(pr)\r\n```\r\n\r\n# Generating predictions for test data\r\n\r\n```{r test }\r\n# Selects the columns of the dataframe that will be used\r\ntestData \u003c- subset(fullData[-trainIdx, ], select=-Survived) \r\nprint(head(testData,5))\r\nprint(str(testData))\r\n# Testing the model in test data\r\npredTestValues \u003c- predict(object = bestModel, \r\n                          newdata = testData[,-1], #The PassengerId will not be used\r\n                          type = \u0022raw\u0022)\r\nprint(head(predTestValues,5))\r\n# Converts data to a dataframe\r\npredTest \u003c- as.data.frame(predTestValues)\r\nprint(head(predTest,10))\r\n```\r\n\r\n# Submitting data for Kaggle validation\r\n\r\n```{r submit}\r\n# Creates the object that will store the data that will be submitted\r\nsub \u003c- data.table(PassengerId = testData$PassengerId, Survived = NA)\r\nsub$Survived = as.numeric(ifelse(predTest == \u0022no\u0022, 0, 1))\r\nprint(head(sub,10))\r\n# Save the CSV file\r\nnameFile \u003c- paste0(nameModel,\u0022.submission.csv\u0022)\r\nfwrite(sub, nameFile)\r\n# Informs the end date/time of the process\r\ndateFin \u003c- Sys.time()\r\ncat(\u0022\\n End of execution: \u0022, as.character(dateFin))\r\n```","dateCreated":"2019-03-26T18:31:09.6404211Z"},"resources":null,"isolatorResults":"\u003cresults\u003e\u003cdisk_kb_free\u003e4811616\u003c/disk_kb_free\u003e\u003cdocker_image_digest\u003e9f01632fae031f0ae00864abd754af9e9aa6dce5da2c9b749c0a8c7b1351f779\u003c/docker_image_digest\u003e\u003cdocker_image_id\u003esha256:80747214c060e6440ce602a0b441c7de9a65b8bffc2f9e95980e2d18902fd0b3\u003c/docker_image_id\u003e\u003cdocker_image_name\u003egcr.io/kaggle-private-byod/rstats\u003c/docker_image_name\u003e\u003cexit_code\u003e0\u003c/exit_code\u003e\u003cfailure_message /\u003e\u003cinvalid_path_errors\u003eFalse\u003c/invalid_path_errors\u003e\u003cout_of_memory\u003eFalse\u003c/out_of_memory\u003e\u003crun_time_seconds\u003e141.468733952992\u003c/run_time_seconds\u003e\u003csucceeded\u003eTrue\u003c/succeeded\u003e\u003ctimeout_exceeded\u003eFalse\u003c/timeout_exceeded\u003e\u003cused_all_space\u003eFalse\u003c/used_all_space\u003e\u003cwas_killed\u003eFalse\u003c/was_killed\u003e\u003c/results\u003e","runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageDigest":"9f01632fae031f0ae00864abd754af9e9aa6dce5da2c9b749c0a8c7b1351f779","dockerImageId":"sha256:80747214c060e6440ce602a0b441c7de9a65b8bffc2f9e95980e2d18902fd0b3","dockerImageName":"/rstats","diskKbFree":4811616,"failureMessage":"","exitCode":0,"queuedSeconds":0,"outputSizeBytes":0,"runTimeSeconds":141.468733952992,"usedAllSpace":false,"timeoutExceeded":false,"isValidStatus":false,"wasGpuEnabled":false,"wasInternetEnabled":false,"outOfMemory":false,"invalidPathErrors":false,"succeeded":true,"wasKilled":false},"outputFilesTotalSizeBytes":10792626,"dockerImageVersionId":22609,"usedCustomDockerImage":false},"author":{"id":1365947,"displayName":"Paulo Salomão","email":null,"editedEmail":null,"editedEmailCode":null,"userName":"salomao2005","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1365947-kg.jpg","profileUrl":"/salomao2005","registerDate":"0001-01-01T00:00:00Z","lastVisitDate":"0001-01-01T00:00:00Z","statusId":0,"performanceTier":0,"userRoles":null,"userLogins":null,"groupIds":null,"duplicateUsers":null,"hasPhoneVerifications":false,"failedNerdchas":0,"hasPendingNerdcha":false,"deleteRequests":null,"userAttributes":null,"isAdmin":false,"isTvc":false,"isKaggleBot":false,"isAdminOrTvc":false,"isAnonymous":false,"canAct":false,"canBeSeen":false,"thumbnailName":null,"activationCode":"00000000-0000-0000-0000-000000000000","isPhoneVerified":false},"baseUrl":"/salomao2005/titanic-new-view","collaborators":{"owner":{"userId":1365947,"groupId":null,"groupMemberCount":null,"profileUrl":"/salomao2005","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1365947-kg.jpg","name":"Paulo Salomão","slug":"salomao2005","userTier":0,"joinDate":null,"type":"owner","isUser":true,"isGroup":false},"collaborators":[]},"initialTab":null,"log":"[{\n  \u0022data\u0022: \u0022\\n\\nprocessing file: script.Rmd\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 5.381702029990265\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |                                                                 |   0%\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.459311557991896\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.                                                                |   2%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |..                                                               |   4%\\nlabel: setup (with options) \\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.463881756993942\n},{\n  \u0022data\u0022: \u0022List of 1\\n $ include:\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.46867842899519\n},{\n  \u0022data\u0022: \u0022 logi FALSE\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.4724589939869475\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |...                                                              |   5%\\n  ordinary text without R code\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.543632960005198\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.....                                                            |   7%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.560005298990291\n},{\n  \u0022data\u0022: \u0022label: ini\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.65285943300114\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |......                                                           |   9%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |.......                                                          |  11%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.884069949010154\n},{\n  \u0022data\u0022: \u0022label: libraries (with options) \\nList of 1\\n $ include: logi FALSE\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 5.888594683987321\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |........                                                         |  12%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |.........                                                        |  14%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.56470145098865\n},{\n  \u0022data\u0022: \u0022label: load\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.568720687006135\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.595513347012457\n},{\n  \u0022data\u0022: \u0022\\r  |..........                                                       |  16%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |............                                                     |  18%\\nlabel: createModels (with options) \\nList of 1\\n $ include:\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.597995827003615\n},{\n  \u0022data\u0022: \u0022 logi FALSE\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.601409730996238\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.............                                                    |  20%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |..............                                                   |  21%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.73260252099135\n},{\n  \u0022data\u0022: \u0022label: strTrain\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.736305450991495\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |...............                                                  |  23%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.977984736993676\n},{\n  \u0022data\u0022: \u0022  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |................                                                 |  25%\\nlabel: summary\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 23.981835242011584\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.................                                                |  27%\\n  ordinary text without R code\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.000580471009016\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |...................                                              |  29%\\nlabel: checkNA\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.004482508986257\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |....................                                             |  30%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |.....................                                            |  32%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.014676946011605\n},{\n  \u0022data\u0022: \u0022label: balanc\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.01816972400411\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |......................                                           |  34%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |.......................                                          |  36%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.02326040598564\n},{\n  \u0022data\u0022: \u0022label: unique\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.026881111989496\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |........................                                         |  38%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |..........................                                       |  39%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.043953532003798\n},{\n  \u0022data\u0022: \u0022label: fullData\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.04732650000369\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |...........................                                      |  41%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |............................                                     |  43%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.056492973002605\n},{\n  \u0022data\u0022: \u0022label: plotSexSurvived\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 24.059737039991887\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.............................                                    |  45%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 25.054846312006703\n},{\n  \u0022data\u0022: \u0022  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |..............................                                   |  46%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 25.056507923989557\n},{\n  \u0022data\u0022: \u0022label: plotPclassSurvived\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 25.05831504400703\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |...............................                                  |  48%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 26.66053181598545\n},{\n  \u0022data\u0022: \u0022  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |................................                                 |  50%\\nlabel: hist\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 26.663572101009777\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |..................................                               |  52%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |...................................                              |  54%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 26.990444308001315\n},{\n  \u0022data\u0022: \u0022label: boxplot\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.001338714995654\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |....................................                             |  55%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |.....................................                            |  57%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.316495551000116\n},{\n  \u0022data\u0022: \u0022label: barplot\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.321166837005876\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |......................................                           |  59%\\n  ordinary text without R code\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.802688210998895\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.......................................                          |  61%\\nlabel: removeNAs\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.807401097001275\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.........................................                        |  62%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |..........................................                       |  64%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.829109532991424\n},{\n  \u0022data\u0022: \u0022label: ohe\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.834495488001266\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |...........................................                      |  66%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |............................................                     |  68%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.940146328008268\n},{\n  \u0022data\u0022: \u0022label: newVars\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.94767285900889\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.............................................                    |  70%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |..............................................                   |  71%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.98994253098499\n},{\n  \u0022data\u0022: \u0022label: plotTitleSurvived\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 27.994858160993317\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |................................................                 |  73%\\n  ordinary text without R code\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 28.54552125898772\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.................................................                |  75%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 28.54822978901211\n},{\n  \u0022data\u0022: \u0022label: plotFamilyTypeSurvived\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 28.552025265002158\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |..................................................               |  77%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |...................................................              |  79%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 29.063906160008628\n},{\n  \u0022data\u0022: \u0022label: removeColumns\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 29.069473081995966\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |....................................................             |  80%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |.....................................................            |  82%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 29.13053430299624\n},{\n  \u0022data\u0022: \u0022label: correlacao (with options) \\nList of 3\\n $ fig.width : num 17\\n $ fig.height: num 15\\n $ fig.align : chr \\\u0022center\\\u0022\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 29.137145863001933\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.......................................................          |  84%\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 30.385234487010166\n},{\n  \u0022data\u0022: \u0022\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |........................................................         |  86%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 30.38841494001099\n},{\n  \u0022data\u0022: \u0022label: split\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 30.393041736009764\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |.........................................................        |  88%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |..........................................................       |  89%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 30.41700134301209\n},{\n  \u0022data\u0022: \u0022label: train\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 30.422104605007917\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |...........................................................      |  91%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |............................................................     |  93%\\nlabel: valid\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 139.4581737910048\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |..............................................................   |  95%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 140.62294408498565\n},{\n  \u0022data\u0022: \u0022  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |...............................................................  |  96%\\nlabel: test\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 140.62757788799354\n},{\n  \u0022data\u0022: \u0022\\r  |                                                                       \\r  |................................................................ |  98%\\n  ordinary text without R code\\n\\n\\r  |                                                                       \\r  |.................................................................| 100%\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 140.67658969399054\n},{\n  \u0022data\u0022: \u0022label: submit\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 140.68087204601034\n},{\n  \u0022data\u0022: \u0022\\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 140.72102999899653\n},{\n  \u0022data\u0022: \u0022output file: /kaggle/working/script.knit.md\\n\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 140.73992147800163\n},{\n  \u0022data\u0022: \u0022/usr/local/bin/pandoc +RTS -K512m -RTS /kaggle/working/script.utf8.md --to html4 --from markdown+autolink_bare_uris+ascii_identifiers+tex_math_single_backslash --output /kaggle/working/__results__.html --smart --email-obfuscation none --standalone --section-divs --table-of-contents --toc-depth 3 --template /usr/local/lib/R/site-library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --number-sections --variable \u0027theme:bootstrap\u0027 --include-in-header /tmp/RtmpiXLJV6/rmarkdown-str137b254ec.html --mathjax --variable \u0027mathjax-url:https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\u0027 --variable code_folding=show --variable code_menu=1 \\n\u0022,\n  \u0022stream_name\u0022: \u0022stdout\u0022,\n  \u0022time\u0022: 140.85757975600427\n},{\n  \u0022data\u0022: \u0022\\nOutput created: __results__.html\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 141.04257027900894\n}]","outputFiles":[{"ownerInfo":null,"kernelVersionOutputFileId":27192923,"kernelVersionId":12103463,"kernelId":3387288,"size":0,"fullPath":"glmboost.ori.model.rds","previewUrl":"/kernels/preview.json/12103463/11a093a2-85c9-ae8b-2eae-07852ea79e5a/glmboost.ori.model.rds","downloadUrl":"https://www.kaggleusercontent.com/kf/12103463/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..-pmIMZlZHVbjlfJe1XgSzQ.gvSL84bvpZ7OrEsuI6-7EvxBx831roVgTWWG_sKlWL4a724sQK4tpHRyqAxtX9Z5hOlzRn2AXygpg7dSuMJOfAMEJ4z4OR84sZIZfsyvtyINnl9fcorItOnbLONULxt2TWuVDXveH-piwRZbVRaYxw.CzHgMHRK1Spuip3-wBU0XA/glmboost.ori.model.rds","fileType":".rds","contentLength":5099834,"contentType":null,"contentMD5":null,"validationErrors":null,"type":"kernelOutputFile","collapsed":false,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"glmboost.ori.model.rds","description":null},{"ownerInfo":null,"kernelVersionOutputFileId":27192924,"kernelVersionId":12103463,"kernelId":3387288,"size":0,"fullPath":"glmboost.ori.model.rds.submission.csv","previewUrl":"/kernels/preview.json/12103463/11a093a2-85c9-ae8b-2eae-07852ea79e5a/glmboost.ori.model.rds.submission.csv","downloadUrl":"https://www.kaggleusercontent.com/kf/12103463/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..Kcl9ym3k_ABOxkYvjWbPTw.r-qLn6-TGHYk8uU6WsR-K0lwsMI-twaBVyYI225xXsGVmvYRiBZuNNihZyPFWMQDWdjIIEMaiPh9A80jghZOwygwHwWy5wvnVp4qJ-hPGUaT5dQ4hn5096RLWZ9vEfHHr_i3GHDn7RPIZ_vWUu1JBQ.9kThA6-lejT-N_N-M8aeNg/glmboost.ori.model.rds.submission.csv","fileType":".csv","contentLength":2839,"contentType":null,"contentMD5":null,"validationErrors":null,"type":"kernelOutputFile","collapsed":false,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"glmboost.ori.model.rds.submission.csv","description":null}],"outputFilesCropped":false,"ouputFilesOwnerInfo":{"databundleVersionId":0,"dataset":null,"competition":null,"kernel":{"kernelId":3387288,"kernelVersionId":12103463,"dataviewToken":"eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..2BDw5D_8vibJ0OLWBjou5g.nwxRumYs0Fh-oSbFQ8sp8djAbSCcf4bQTxTNgAYAzeM7nLU4BX9c73mvrhT4c4roINHpFQ0FebHFzIkmb1rv-VmncPfi9M8qK9hxiFpxddl81ryYPf1P7UhcD-K3Y4N4fXyVI_YBEPuVZB78vCMOzjyFP4lDC9Aa18pSxUXJKQUORd7xa9VOBA2b5RMM1NeyXUWBmMxnc_vcc7RaO358R4vGldHVNnEA4crd-oIq0wHI9m7NOsxk_eC0jzuwNZ9bZvrhpm2lDLEHS0NiJJ9aI1ZR3wYIBKxkEIOr57rK7KIDy7hiS-dyN85r-1k4B2bLQ9gHCwXfcggIcbfa5FRAzHxrckm9zd9pL7-jEgPZic9BZtjz7sETbuo5YB7gIbEgO-hhS5zvpvd8NPcNOv9V7HvhY2r-SOQoW0LKlA6K2d2OxA1Y0yOBPV-VTqt6JLrHwFXr_lDHZg385k3zYRklqOgLPnCpAgXdOCMoHfQkFAeoUjcY09Lo3lMK6wbkmY48AVL_6B4rCFDW5U78my0JVWeUfIQmpZtjFw7cgVpQl85MtHUT83xSVq2XxIFRIfBYKgBfHma9zpIruXCeS7ixbg.EEb1rHZYTkg1q_UlvhJ38w","scope":"salomao2005/titanic-new-view"},"previewsDisabled":false},"pageMessages":[],"dataSources":[{"imageUrl":"https://storage.googleapis.com/kaggle-competitions/kaggle/3136/logos/thumb76_76.png","sourceUrl":"/c/titanic","slug":"titanic","lastUpdated":"2012-09-28T21:13:33.55Z","overview":"Start here! Predict survival on the Titanic and get familiar with ML basics","sourceType":"competition","sourceVersionType":null,"sourceId":3136,"sourceVersionNumber":null,"maxVersionNumber":null,"descriptionMimeType":"text/html","deleted":false,"private":false,"privateButVisible":false,"ownerInfo":{"databundleVersionId":26502,"dataset":null,"competition":{"competitionId":3136,"dataviewToken":null,"scope":"c/titanic"},"kernel":null,"previewsDisabled":true},"type":"dataSource","collapsed":false,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[{"id":63842,"blobFileId":37991,"databundleVersionId":26502,"databundleVersionObjectType":"file","url":null,"relativePath":"../input/gender_submission.csv","creationDate":"2017-02-01T01:49:18Z","isDummy":false,"size":3258,"fullPath":"../input/gender_submission.csv","previewUrl":"kernels/competition-preview/3136?relativePath=gender_submission.csv","downloadUrl":"/c/titanic/download/gender_submission.csv","fileType":".csv","contentLength":3258,"contentType":"text/csv","contentMD5":"MNEHO5ZKXYFUMexgOg3jUw==","validationErrors":null,"type":"databundleVersionObject","collapsed":false,"info":{"metrics":{"tableMetrics":{"exception":null,"rowCount":418},"columnMetrics":[]},"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":{"delimiter":",","includesHeader":true},"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[{"columns":[{"order":0,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"PassengerId","description":"892\n893\n894\n895\n896\n897\n898\n899\n900\n901\n902\n903\n904\n905\n906\n907\n908\n909\n910\n911\n912\n913\n914\n915\n916\n917\n918\n919\n920\n921\n922\n923\n924\n925\n926\n927\n928\n929\n930\n931\n932\n933\n934\n935\n936\n937\n938\n939\n940\n941\n942\n943\n944\n945\n946\n947\n948\n949\n950\n951\n952\n953\n954\n955\n956\n957\n958\n959\n960\n961\n962\n963\n964\n965\n966\n967\n968\n969\n970\n971\n972\n973\n974\n975\n976\n977\n978\n979\n980\n981\n982\n983\n984\n985\n986\n987\n988\n989\n990\n991\n992\n993\n994\n995\n996\n997\n998\n999\n1000\n1001\n1002\n1003\n1004\n1005\n1006\n1007\n1008\n1009\n1010\n1011\n1012\n1013\n1014\n1015\n1016\n1017\n1018\n1019\n1020\n1021\n1022\n1023\n1024\n1025\n1026\n1027\n1028\n1029\n1030\n1031\n1032\n1033\n1034\n1035\n1036\n1037\n1038\n1039\n1040\n1041\n1042\n1043\n1044\n1045\n1046\n1047\n1048\n1049\n1050\n1051\n1052\n1053\n1054\n1055\n1056\n1057\n1058\n1059\n1060\n1061\n1062\n1063\n1064\n1065\n1066\n1067\n1068\n1069\n1070\n1071\n1072\n1073\n1074\n1075\n1076\n1077\n1078\n1079\n1080\n1081\n1082\n1083\n1084\n1085\n1086\n1087\n1088\n1089\n1090\n1091\n1092\n1093\n1094\n1095\n1096\n1097\n1098\n1099\n1100\n1101\n1102\n1103\n1104\n1105\n1106\n1107\n1108\n1109\n1110\n1111\n1112\n1113\n1114\n1115\n1116\n1117\n1118\n1119\n1120\n1121\n1122\n1123\n1124\n1125\n1126\n1127\n1128\n1129\n1130\n1131\n1132\n1133\n1134\n1135\n1136\n1137\n1138\n1139\n1140\n1141\n1142\n1143\n1144\n1145\n1146\n1147\n1148\n1149\n1150\n1151\n1152\n1153\n1154\n1155\n1156\n1157\n1158\n1159\n1160\n1161\n1162\n1163\n1164\n1165\n1166\n1167\n1168\n1169\n1170\n1171\n1172\n1173\n1174\n1175\n1176\n1177\n1178\n1179\n1180\n1181\n1182\n1183\n1184\n1185\n1186\n1187\n1188\n1189\n1190\n1191\n1192\n1193\n1194\n1195\n1196\n1197\n1198\n1199\n1200\n1201\n1202\n1203\n1204\n1205\n1206\n1207\n1208\n1209\n1210\n1211\n1212\n1213\n1214\n1215\n1216\n1217\n1218\n1219\n1220\n1221\n1222\n1223\n1224\n1225\n1226\n1227\n1228\n1229\n1230\n1231\n1232\n1233\n1234\n1235\n1236\n1237\n1238\n1239\n1240\n1241\n1242\n1243\n1244\n1245\n1246\n1247\n1248\n1249\n1250\n1251\n1252\n1253\n1254\n1255\n1256\n1257\n1258\n1259\n1260\n1261\n1262\n1263\n1264\n1265\n1266\n1267\n1268\n1269\n1270\n1271\n1272\n1273\n1274\n1275\n1276\n1277\n1278\n1279\n1280\n1281\n1282\n1283\n1284\n1285\n1286\n1287\n1288\n1289\n1290\n1291\n1292\n1293\n1294\n1295\n1296\n1297\n1298\n1299\n1300\n1301\n1302\n1303\n1304\n1305\n1306\n1307\n1308\n1309\n"},{"order":1,"originalType":"","type":"boolean","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Survived","description":"0\n0\n0\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n1\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n"}],"totalRows":null,"type":"genericTable","collapsed":true,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"","description":null}],"name":"gender_submission.csv","description":"892,0\n893,0\n894,0\n895,0\n896,0\n897,0\n898,0\n899,0\n900,0\n901,0\n902,0\n903,0\n904,1\n905,0a\n906,1\n907,0\n908,0\n909,0\n910,0\n911,0\n912,1\n913,0\n914,0\n915,0\n916,1\n917,0\n918,0\n919,0\n920,0\n921,0\n922,0\n923,0\n924,0\n925,0\n926,1\n927,0\n928,0\n929,0\n930,0\n931,1\n932,0\n933,0\n934,0\n935,0\n936,1\n937,0\n938,0\n939,0\n940,1\n941,0\n942,1\n943,0\n944,0\n945,1\n946,0\n947,0\n948,0\n949,0\n950,0\n951,1\n952,0\n953,0\n954,0\n955,0\n956,1\n957,0\n958,0\n959,0\n960,0\n961,1\n962,\n963,0\n964,0\n965,0\n966,1\n967,1\n968,0\n969,0\n970,0\n971,0\n972,0\n973,1\n974,0\n975,0\n976,0\n977,0\n978,0\n979,0\n980,0\n981,0\n982,0\n983,0\n984,0\n985,0\n986,0\n987,0\n988,1\n989,0\n990,0\n991,0\n992,1\n993,0\n994,0\n995,0\n996,0\n997,0\n998,0\n999,0\n1000,0\n1001,0\n1002,0\n1003,0\n1004,0\n1005,0\n1006,1\n1007,0\n1008,0\n1009,0\n1010,1\n1011,0\n1012,0\n1013,0\n1014,1\n1015,0\n1016,0\n1017,0\n1018,0\n1019,0\n1020,0\n1021,0\n1022,0\n1023,0\n1024,0\n1025,0\n1026,0\n1027,0\n1028,0\n1029,0\n1030,0\n1031,0\n1032,0\n1033,1\n1034,1\n1035,0\n1036,0\n1037,0\n1038,1\n1039,0\n1040,0\n1041,0\n1042,1\n1043,0\n1044,0\n1045,0\n1046,0\n1047,0\n1048,1\n1049,0\n1050,0\n1051,0\n1052,0\n1053,0\n1054,0\n1055,0\n1056,0\n1057,0\n1058,1\n1059,0\n1060,0\n1061,0\n1062,0\n1063,0\n1064,0\n1065,0\n1066,0\n1067,0\n1068,0\n1069,1\n1070,0\n1071,1\n1072,0\n1073,1\n1074,1\n1075,0\n1076,1\n1077,0\n1078,0\n1079,0\n1080,1\n1081,0\n1082,0\n1083,0\n1084,0\n1085,0\n1086,0\n1087,0\n1088,1\n1089,0\n1090,0\n1091,0\n1092,0\n1093,0\n1094,1\n1095,0\n1096,0\n1097,0\n1098,0\n1099,0\n1100,0\n1101,0\n1102,0\n1103,0\n1104,1\n1105,0\n1106,0\n1107,0\n1108,0\n1109,1\n1110,1\n1111,0\n1112,0\n1113,0\n1114,0\n1115,0\n1116,0\n1117,0\n1118,0\n1119,0\n1120,0\n1121,0\n1122,1\n1123,0\n1124,0\n1125,0\n1126,1\n1127,0\n1128,1\n1129,0\n1130,0\n1131,1\n1132,0\n1133,0\n1134,1\n1135,0\n1136,0\n1137,1\n1138,0\n1139,0\n1140,0\n1141,0\n1142,0\n1143,0\n1144,1\n1145,0\n1146,0\n1147,0\n1148,0\n1149,0\n1150,0\n1151,0\n1152,0\n1153,0\n1154,0\n1155,0\n1156,0\n1157,0\n1158,0\n1159,0\n1160,0\n1161,0\n1162,1\n1163,0\n1164,1\n1165,0\n1166,0\n1167,0\n1168,0\n1169,0\n1170,0\n1171,0\n1172,0\n1173,0\n1174,0\n1175,0\n1176,0\n1177,0\n1178,0\n1179,1\n1180,0\n1181,0\n1182,0\n1183,0\n1184,0\n1185,1\n1186,0\n1187,0\n1188,0\n1189,0\n1190,1\n1191,0\n1192,0\n1193,0\n1194,0\n1195,0\n1196,0\n1197,0\n1198,1\n1199,0\n1200,1\n1201,0\n1202,0\n1203,0\n1204,0\n1205,0\n1206,1\n1207,0\n1208,1\n1209,0\n1210,0\n1211,0\n1212,0\n1213,0\n1214,0\n1215,0\n1216,1\n1217,0\n1218,0\n1219,1\n1220,0\n1221,0\n1222,0\n1223,0\n1224,0\n1225,0\n1226,0\n1227,0\n1228,0\n1229,0\n1230,0\n1231,0\n1232,0\n1233,0\n1234,1\n1235,1\n1236,0\n1237,0\n1238,0\n1239,0\n1240,0\n1241,0\n1242,1\n1243,0\n1244,1\n1245,1\n1246,0\n1247,0\n1248,1\n1249,0\n1250,0\n1251,0\n1252,1\n1253,0\n1254,0\n1255,0\n1256,1\n1257,1\n1258,0\n1259,0\n1260,0\n1261,0\n1262,0\n1263,1\n1264,0\n1265,0\n1266,1\n1267,1\n1268,0\n1269,0\n1270,1\n1271,0\n1272,0\n1273,0\n1274,0\n1275,0\n1276,0\n1277,1\n1278,0\n1279,0\n1280,0\n1281,0\n1282,1\n1283,0\n1284,0\n1285,0\n1286,0\n1287,1\n1288,0\n1289,1\n1290,0\n1291,0\n1292,1\n1293,0\n1294,0\n1295,1\n1296,0\n1297,0\n1298,0\n1299,1\n1300,0\n1301,0\n1302,0\n1303,1\n1304,0\n1305,0\n1306,1\n1307,0\n1308,0\n1309,0"},{"id":63841,"blobFileId":2613,"databundleVersionId":26502,"databundleVersionObjectType":"file","url":null,"relativePath":"../input/test.csv","creationDate":"2013-06-28T13:40:24.227Z","isDummy":false,"size":28629,"fullPath":"../input/test.csv","previewUrl":"kernels/competition-preview/3136?relativePath=test.csv","downloadUrl":"/c/titanic/download/test.csv","fileType":".csv","contentLength":28629,"contentType":"text/csv","contentMD5":"dTO4Lq5LWCYQy9aKpjawFw==","validationErrors":null,"type":"databundleVersionObject","collapsed":false,"info":{"metrics":{"tableMetrics":{"exception":null,"rowCount":418},"columnMetrics":[]},"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":{"delimiter":",","includesHeader":true},"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[{"columns":[{"order":0,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"PassengerId","description":"1"},{"order":1,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Pclass","description":"1"},{"order":2,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Name","description":"the name of the passenger"},{"order":3,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Sex","description":null},{"order":4,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Age","description":null},{"order":5,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"SibSp","description":"of siblings / spouses aboard the Titanic"},{"order":6,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Parch","description":"of parents / children aboard the Titanic"},{"order":7,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Ticket","description":"Ticket number"},{"order":8,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Fare","description":"Passenger fare"},{"order":9,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Cabin","description":"Cabin number"},{"order":10,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Embarked","description":"Port of Embarkation"}],"totalRows":null,"type":"genericTable","collapsed":true,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"","description":null}],"name":"test.csv","description":"test data to check the accuracy of the model created\n"},{"id":63840,"blobFileId":2307,"databundleVersionId":26502,"databundleVersionObjectType":"file","url":null,"relativePath":"../input/train.csv","creationDate":"2013-06-28T13:40:25.23Z","isDummy":false,"size":61194,"fullPath":"../input/train.csv","previewUrl":"kernels/competition-preview/3136?relativePath=train.csv","downloadUrl":"/c/titanic/download/train.csv","fileType":".csv","contentLength":61194,"contentType":"text/csv","contentMD5":"IwnMXwR4Ltm7YBbZ9OOBzw==","validationErrors":null,"type":"databundleVersionObject","collapsed":false,"info":{"metrics":{"tableMetrics":{"exception":null,"rowCount":891},"columnMetrics":[]},"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":{"delimiter":",","includesHeader":true},"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[{"columns":[{"order":0,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"PassengerId","description":"type should be integers"},{"order":1,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Survived","description":"Survived or Not "},{"order":2,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Pclass","description":"Class of Travel"},{"order":3,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Name","description":"Name of Passenger"},{"order":4,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Sex","description":"Gender"},{"order":5,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Age","description":"Age of Passengers"},{"order":6,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"SibSp","description":"Number of Sibling/Spouse aboard"},{"order":7,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Parch","description":"Number of Parent/Child aboard"},{"order":8,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Ticket","description":null},{"order":9,"originalType":"","type":"numeric","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Fare","description":null},{"order":10,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Cabin","description":null},{"order":11,"originalType":"","type":"string","extendedType":null,"isNullable":false,"isPrimaryKey":false,"isLabel":false,"info":null,"name":"Embarked","description":"The port in which a passenger has embarked. C - Cherbourg, S - Southampton, Q = Queenstown"}],"totalRows":null,"type":"genericTable","collapsed":true,"info":{"metrics":null,"archiveInfo":null,"archiveInfoV2":null,"blobFileInfo":null,"convertCsvInfo":null,"kernelReference":null},"settings":{"csvSettings":null,"bigQuerySettings":null,"bigQueryMirrorSettings":null,"storageSettings":null,"remoteUrlSettings":null,"remoteGithubSettings":null},"render":null,"children":[],"name":"","description":null}],"name":"train.csv","description":"contains data \n"}],"name":"Titanic: Machine Learning from Disaster","description":"\u003ch3\u003eOverview\u003c/h3\u003e\n\u003cp\u003eThe data has been split into two groups:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003etraining set (train.csv)\u003c/li\u003e\n\u003cli\u003etest set (test.csv)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cb\u003e The training set \u003c/b\u003eshould be used to build your machine learning models. For the training set, we provide the outcome (also known as the “ground truth”) for each passenger. Your model will be based on “features” like passengers’ gender and class. You can also use \u003ca href=\u0022https://triangleinequality.wordpress.com/2013/09/08/basic-feature-engineering-with-the-titanic-data/\u0022 target=\u0022_blank\u0022\u003e feature engineering \u003c/a\u003eto create new features.\u003c/p\u003e\n\u003cp\u003e\u003cb\u003eThe test set \u003c/b\u003eshould be used to see how well your model performs on unseen data. For the test set, we do not provide the ground truth for each passenger. It is your job to predict these outcomes. For each passenger in the test set, use the model you trained to predict whether or not they survived the sinking of the Titanic.\u003c/p\u003e\n\u003cp\u003eWe also include \u003cb\u003egender_submission.csv\u003c/b\u003e, a set of predictions that assume all and only female passengers survive, as an example of what a submission file should look like.\u003c/p\u003e\n\u003ch3\u003eData Dictionary\u003c/h3\u003e\n\u003ctable style=\u0022width: 100%;\u0022\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\u003cth\u003e\u003cb\u003eVariable\u003c/b\u003e\u003c/th\u003e\u003cth\u003e\u003cb\u003eDefinition\u003c/b\u003e\u003c/th\u003e\u003cth\u003e\u003cb\u003eKey\u003c/b\u003e\u003c/th\u003e\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003esurvival\u003c/td\u003e\n\u003ctd\u003eSurvival\u003c/td\u003e\n\u003ctd\u003e0 = No, 1 = Yes\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epclass\u003c/td\u003e\n\u003ctd\u003eTicket class\u003c/td\u003e\n\u003ctd\u003e1 = 1st, 2 = 2nd, 3 = 3rd\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003esex\u003c/td\u003e\n\u003ctd\u003eSex\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAge\u003c/td\u003e\n\u003ctd\u003eAge in years\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003esibsp\u003c/td\u003e\n\u003ctd\u003e# of siblings / spouses aboard the Titanic\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eparch\u003c/td\u003e\n\u003ctd\u003e# of parents / children aboard the Titanic\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eticket\u003c/td\u003e\n\u003ctd\u003eTicket number\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003efare\u003c/td\u003e\n\u003ctd\u003ePassenger fare\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ecabin\u003c/td\u003e\n\u003ctd\u003eCabin number\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eembarked\u003c/td\u003e\n\u003ctd\u003ePort of Embarkation\u003c/td\u003e\n\u003ctd\u003eC = Cherbourg, Q = Queenstown, S = Southampton\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3\u003eVariable Notes\u003c/h3\u003e\n\u003cp\u003e\u003cb\u003epclass\u003c/b\u003e: A proxy for socio-economic status (SES)\u003cbr /\u003e 1st = Upper\u003cbr /\u003e 2nd = Middle\u003cbr /\u003e 3rd = Lower\u003cbr /\u003e\u003cbr /\u003e \u003cb\u003eage\u003c/b\u003e: Age is fractional if less than 1. If the age is estimated, is it in the form of xx.5\u003cbr /\u003e\u003cbr /\u003e \u003cb\u003esibsp\u003c/b\u003e: The dataset defines family relations in this way...\u003cbr /\u003e Sibling = brother, sister, stepbrother, stepsister\u003cbr /\u003e Spouse = husband, wife (mistresses and fiancés were ignored)\u003cbr /\u003e\u003cbr /\u003e \u003cb\u003eparch\u003c/b\u003e: The dataset defines family relations in this way...\u003cbr /\u003e Parent = mother, father\u003cbr /\u003e Child = daughter, son, stepdaughter, stepson\u003cbr /\u003e Some children travelled only with a nanny, therefore parch=0 for them.\u003c/p\u003e"}],"versions":[{"id":12103463,"kernelVersionId":null,"isForkParent":false,"isNotebook":false,"languageName":"RMarkdown","lastRunTime":"2019-03-26T18:31:09.84Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":684,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-rstats/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/rstats/","dockerImageId":"sha256:80747214c060e6440ce602a0b441c7de9a65b8bffc2f9e95980e2d18902fd0b3","dockerImageName":"gcr.io/kaggle-private-byod/rstats","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":141.468733952992,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Titanic New View","url":"/salomao2005/titanic-new-view?scriptVersionId=12103463","versionNumber":1,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null}],"categories":{"categories":[],"type":"script"},"submitToCompetitionInfo":null,"downloadAllFilesUrl":"/kernels/svzip/12103463","submission":{"date":"2019-03-26T18:55:26.447Z","privateScore":null,"publicScore":"0.78947","submissionId":10632472,"teamName":"Paulo Salomão"},"menuLinks":[{"href":"/salomao2005/titanic-new-view/notebook","text":"Report","title":"Notebook","tab":"report","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/salomao2005/titanic-new-view/code","text":"Code","title":"Code","tab":"code","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/salomao2005/titanic-new-view/data","text":"Data","title":"Data","tab":"data","count":1,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/salomao2005/titanic-new-view/output","text":"Output","title":"Output","tab":"output","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/salomao2005/titanic-new-view/comments","text":"Comments","title":"Comments","tab":"comments","count":0,"showZeroCountExplicitly":true,"reportEventCategory":null,"reportEventType":null},{"href":"/salomao2005/titanic-new-view/log","text":"Log","title":"Log","tab":"log","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/salomao2005/titanic-new-view/versions","text":"Versions","title":"Versions","tab":"versions","count":1,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/salomao2005/titanic-new-view/forks","text":"Forks","title":"Forks","tab":"forks","count":0,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null}],"rightMenuLinks":[],"callToAction":{"href":"/kernels/fork-version/12103463","text":"Fork Script","title":"Fork Script","tab":null,"count":null,"showZeroCountExplicitly":false,"reportEventCategory":"kernels","reportEventType":"anonymousKernelForkCreation"},"voteButton":{"totalVotes":2,"hasAlreadyVotedUp":false,"hasAlreadyVotedDown":false,"canUpvote":true,"canDownvote":false,"voteUpUrl":"/kernels/vote?id=3387288","voteDownUrl":null,"voters":[{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Data","profileUrl":"/eskimo","tier":"Novice","tierInt":0,"userId":161305,"userName":"eskimo"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Rijul","profileUrl":"/rijboy","tier":"Contributor","tierInt":1,"userId":1179920,"userName":"rijboy"}],"currentUserInfo":null,"showVoters":true,"alwaysShowVoters":true},"parentDataSource":null,"parentName":"Titanic: Machine Learning from Disaster","parentUrl":"/c/titanic","thumbnailImageUrl":"https://storage.googleapis.com/kaggle-competitions/kaggle/3136/logos/thumb76_76.png","canWrite":false,"canAdminister":false,"datasetHidden":false,"forkParentIsRedacted":false,"forkDiffLinesChanged":0,"forkDiffLinesDeleted":0,"forkDiffLinesInserted":0,"forkDiffUrl":null,"forkParentAuthorDisplayName":null,"forkParentAuthorUrl":null,"forkParentTitle":null,"forkParentUrl":null,"canSeeDataExplorerV2":true,"canSeeRevampedViewer":true,"canSeeInnerTableOfContents":true,"canSeeCopyAndEditText":true,"simplifiedViewer":false,"kernelOutputDataset":null});performance && performance.mark && performance.mark("KernelViewer.componentCouldBootstrap");</script>

<form action="/salomao2005/titanic-new-view" id="__AjaxAntiForgeryForm" method="post"><input name="X-XSRF-TOKEN" type="hidden" value="CfDJ8LdUzqlsSWBPr4Ce3rb9VL-KRuWpqYUlD47Ijsjo20pN7R3fRr2mQdUMuRuJWDRYBhbYSPIbRJ2-6vaV6hPGnG9gUu9IGqYdDAk7gpBvhHKQAzDBx-elU3Ht9Zvh14-_0Qez6OThBzAvMtBRmVO0j_U" /></form>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["STIX", "TeX"],
            linebreaks: {
                automatic: true
            },
            EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
        },
        tex2jax: {
            inlineMath: [["\\(", "\\)"], ["\\\\(", "\\\\)"]],
            displayMath: [["$$", "$$"], ["\\[", "\\]"]],
            processEscapes: true,
            ignoreClass: "tex2jax_ignore|dno"
        },
        TeX: {
            noUndefined: {
                attributes: {
                    mathcolor: "red",
                    mathbackground: "#FFEEEE",
                    mathsize: "90%"
                }
            }
        },
        Macros: {
            href: "{}"
        },
        skipStartupTypeset: true,
        messageStyle: "none"
    });
</script>
<script type="text/javascript" async crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



    </div>

        <div class="site-layout__footer">
            <footer class="site-footer">
    <div class="site-footer__content">
        <div class="site-footer__copyright">
            <span>&copy; 2019 Kaggle Inc</span>
        </div>
        <nav class="site-footer__nav">
            <a href="/team">Our Team</a>
            <a href="/terms">Terms</a>
            <a href="/privacy">Privacy</a>
            <a href="/contact">Contact/Support</a>
        </nav>
        <nav class="site-footer__social">
            <div data-component-name="SocialIcons" style="display: flex; flex-direction: column; flex: 1 0 auto;"></div><script>var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push();performance && performance.mark && performance.mark("SocialIcons.componentCouldBootstrap");</script>
        </nav>
    </div>
</footer>

        </div>
</div>




    </main>
</body>
</html>
