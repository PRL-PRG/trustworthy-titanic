---
title: First incursion to the Titanic Disaster and Kaggle competitions
author: Cristóbal Alcázar
date: '2018-02-16'
output:
  html_document:
    theme: united
    highlight: tango
---

## Prepare the analysis

First step is load the relevant packages used in the analysis.

```{r, message = FALSE}
library(tidyverse)
```
Second step import the train and test set to the R environment.

```{r, collapse = TRUE}
train <- read_csv("../input/train.csv")
test <- read_csv("../input/test.csv")
```

Third step, check the structure of the data and understand the variables.
If we pay attention to the *codebook* of the data we can get valuable information to understand well the meaning of each variable and label. 

The most mportant details are:
- Survived: 0 = No / 1 = Yes
- Pclass: 1 = Upper / 2 = Middle / 3 = Lower
- SibSp: Number of siblings / spouses aboard the Titanic
- Parch: Number of parents / children aboard the Titanic

## Structure of the datasets {.tabset}
### str(train)
```{r, collapse = TRUE}
str(train)
```
### str(test)
```{r, collapse = TRUE}
str(test)
```

#



Another useful thing is change the names of the variables to lowercase (*a personal preference but also is less prone to errors*).

```{r, collapse = TRUE}

names(train) <- tolower(names(train))

names(test) <- tolower(names(test))

```



### Goal of the analysis



The goal of the analysis is make predictions for the survivers of the Titanic's passengers. We have a train set to build a predictor model and  

see how well the model generalize to unseen data (test set). We didn't have the actual outcome (*surviver variable*) of the test set. This is 

the mechanic of the Kaggle competitions, the response variable is hidden and is used once we upload the analysis for the score.



So we want to learn a function based on the train dataset to mapping a set of input variables to the survived variable.

$$\hat{survived}_{i} \approx f(X_{i1}, ... ,X_{in})$$



## Explore the variables



```{r}

train %>%

    select(sex, survived) %>%

    mutate(survived = recode(as.character(survived), "0" = "No", "1" = "Yes")) %>%

    group_by(sex, survived) %>%

    summarize(num_obs = n()) %>%

    group_by(sex) %>%

    mutate(freq = num_obs/ sum(num_obs)) %>%

    kable(align = 'c')

    

train %>%

    select(sex, survived) %>%

    mutate(survived = recode(as.character(survived), "0" = "No", "1" = "Yes"))  %>%

    unite(group, survived, sex, sep = "-") %>%

    count(group) %>%

    mutate(by_gender = stringr::str_detect(group, "female")) %>%

    group_by(by_gender) %>%

    mutate(freq = n / sum(n))

```