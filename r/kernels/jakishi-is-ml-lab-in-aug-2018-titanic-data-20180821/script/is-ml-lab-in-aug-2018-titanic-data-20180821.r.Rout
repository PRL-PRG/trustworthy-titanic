
R version 3.6.1 (2019-07-05) -- "Action of the Toes"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin15.6.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> 
> ## Importing packages
> 
> # This R environment comes with all of CRAN and many other helpful packages preinstalled.
> # You can see which packages are installed by checking out the kaggle/rstats docker image: 
> # https://github.com/kaggle/docker-rstats
> 
> library(tidyverse) # metapackage with lots of helpful functions
── [1mAttaching packages[22m ────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──
[32m✓[39m [34mggplot2[39m 3.3.2     [32m✓[39m [34mpurrr  [39m 0.3.4
[32m✓[39m [34mtibble [39m 3.0.1     [32m✓[39m [34mdplyr  [39m 1.0.2
[32m✓[39m [34mtidyr  [39m 1.1.0     [32m✓[39m [34mstringr[39m 1.4.0
[32m✓[39m [34mreadr  [39m 1.3.1     [32m✓[39m [34mforcats[39m 0.5.0
── [1mConflicts[22m ───────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
[31mx[39m [34mdplyr[39m::[32mfilter()[39m masks [34mstats[39m::filter()
[31mx[39m [34mdplyr[39m::[32mlag()[39m    masks [34mstats[39m::lag()
Warning messages:
1: package ‘ggplot2’ was built under R version 3.6.2 
2: package ‘tibble’ was built under R version 3.6.2 
3: package ‘tidyr’ was built under R version 3.6.2 
4: package ‘purrr’ was built under R version 3.6.2 
5: package ‘dplyr’ was built under R version 3.6.2 
> 
> ## Running code
> 
> # In a notebook, you can run a single code cell by clicking in the cell and then hitting 
> # the blue arrow to the left, or by clicking in the cell and pressing Shift+Enter. In a script, 
> # you can run code by highlighting the code you want to run and then clicking the blue arrow
> # at the bottom of this window.
> 
> ## Reading in files
> 
> # You can access files from datasets you've added to this kernel in the "../input/" directory.
> # You can see the files added to this kernel by running the code below. 
> 
> list.files(path = "../input")
[1] "gender_submission.csv" "test.csv"              "train.csv"            
> 
> ## Saving data
> 
> # If you save any files or images, these will be put in the "output" directory. You 
> # can see the output directory by committing and running your kernel (using the 
> # Commit & Run button) and then checking out the compiled version of your kernel.
> 
> if(T){
+   lstInputFileNmList <- list()
+   lstInputFileNmList[["train"]] <- "train.csv"
+   lstInputFileNmList[["test"]] <- "test.csv"
+   lstInputFileNmList[["submit"]] <- "gender_submission.csv"
+ }
> 
> #Load data
> datTrain <- read.csv('../input/train.csv', header=T, stringsAsFactors=F)
> test <- read.csv('../input/test.csv', header=T, stringsAsFactors=F)
> 
> datTrain$Age_log <- log(1+abs(datTrain$Age))
> datTrain$Fare_log <- log(1+abs(datTrain$Fare))
> 
> dim(datTrain)
[1] 891  14
> 
> nrow(datTrain)
[1] 891
> 
> ncol(datTrain)
[1] 14
> 
> colnames(datTrain)
 [1] "PassengerId" "Survived"    "Pclass"      "Name"        "Sex"        
 [6] "Age"         "SibSp"       "Parch"       "Ticket"      "Fare"       
[11] "Cabin"       "Embarked"    "Age_log"     "Fare_log"   
> 
> str(datTrain)
'data.frame':	891 obs. of  14 variables:
 $ PassengerId: int  1 2 3 4 5 6 7 8 9 10 ...
 $ Survived   : int  0 1 1 1 0 0 0 0 1 1 ...
 $ Pclass     : int  3 1 3 1 3 3 1 3 3 2 ...
 $ Name       : chr  "Braund, Mr. Owen Harris" "Cumings, Mrs. John Bradley (Florence Briggs Thayer)" "Heikkinen, Miss. Laina" "Futrelle, Mrs. Jacques Heath (Lily May Peel)" ...
 $ Sex        : chr  "male" "female" "female" "female" ...
 $ Age        : num  22 38 26 35 35 NA 54 2 27 14 ...
 $ SibSp      : int  1 1 0 1 0 0 0 3 0 1 ...
 $ Parch      : int  0 0 0 0 0 0 0 1 2 0 ...
 $ Ticket     : chr  "A/5 21171" "PC 17599" "STON/O2. 3101282" "113803" ...
 $ Fare       : num  7.25 71.28 7.92 53.1 8.05 ...
 $ Cabin      : chr  "" "C85" "" "C123" ...
 $ Embarked   : chr  "S" "C" "S" "S" ...
 $ Age_log    : num  3.14 3.66 3.3 3.58 3.58 ...
 $ Fare_log   : num  2.11 4.28 2.19 3.99 2.2 ...
> 
> #knitr::kable(head(datTrain), format="pandoc", caption="") # Original Satou san7s R code 
> head(datTrain)
  PassengerId Survived Pclass
1           1        0      3
2           2        1      1
3           3        1      3
4           4        1      1
5           5        0      3
6           6        0      3
                                                 Name    Sex Age SibSp Parch
1                             Braund, Mr. Owen Harris   male  22     1     0
2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
3                              Heikkinen, Miss. Laina female  26     0     0
4        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
5                            Allen, Mr. William Henry   male  35     0     0
6                                    Moran, Mr. James   male  NA     0     0
            Ticket    Fare Cabin Embarked  Age_log Fare_log
1        A/5 21171  7.2500              S 3.135494 2.110213
2         PC 17599 71.2833   C85        C 3.663562 4.280593
3 STON/O2. 3101282  7.9250              S 3.295837 2.188856
4           113803 53.1000  C123        S 3.583519 3.990834
5           373450  8.0500              S 3.583519 2.202765
6           330877  8.4583              Q       NA 2.246893
> 
> # knitr::kable(tail(datTrain), format="pandoc", caption="")
> tail(datTrain) 
    PassengerId Survived Pclass                                     Name    Sex
886         886        0      3     Rice, Mrs. William (Margaret Norton) female
887         887        0      2                    Montvila, Rev. Juozas   male
888         888        1      1             Graham, Miss. Margaret Edith female
889         889        0      3 Johnston, Miss. Catherine Helen "Carrie" female
890         890        1      1                    Behr, Mr. Karl Howell   male
891         891        0      3                      Dooley, Mr. Patrick   male
    Age SibSp Parch     Ticket   Fare Cabin Embarked  Age_log Fare_log
886  39     0     5     382652 29.125              Q 3.688879 3.405355
887  27     0     0     211536 13.000              S 3.332205 2.639057
888  19     0     0     112053 30.000   B42        S 2.995732 3.433987
889  NA     1     2 W./C. 6607 23.450              S       NA 3.196630
890  26     0     0     111369 30.000  C148        C 3.295837 3.433987
891  32     0     0     370376  7.750              Q 3.496508 2.169054
> 
> summary(datTrain)
  PassengerId       Survived          Pclass          Name          
 Min.   :  1.0   Min.   :0.0000   Min.   :1.000   Length:891        
 1st Qu.:223.5   1st Qu.:0.0000   1st Qu.:2.000   Class :character  
 Median :446.0   Median :0.0000   Median :3.000   Mode  :character  
 Mean   :446.0   Mean   :0.3838   Mean   :2.309                     
 3rd Qu.:668.5   3rd Qu.:1.0000   3rd Qu.:3.000                     
 Max.   :891.0   Max.   :1.0000   Max.   :3.000                     
                                                                    
     Sex                 Age            SibSp           Parch       
 Length:891         Min.   : 0.42   Min.   :0.000   Min.   :0.0000  
 Class :character   1st Qu.:20.12   1st Qu.:0.000   1st Qu.:0.0000  
 Mode  :character   Median :28.00   Median :0.000   Median :0.0000  
                    Mean   :29.70   Mean   :0.523   Mean   :0.3816  
                    3rd Qu.:38.00   3rd Qu.:1.000   3rd Qu.:0.0000  
                    Max.   :80.00   Max.   :8.000   Max.   :6.0000  
                    NA's   :177                                     
    Ticket               Fare           Cabin             Embarked        
 Length:891         Min.   :  0.00   Length:891         Length:891        
 Class :character   1st Qu.:  7.91   Class :character   Class :character  
 Mode  :character   Median : 14.45   Mode  :character   Mode  :character  
                    Mean   : 32.20                                        
                    3rd Qu.: 31.00                                        
                    Max.   :512.33                                        
                                                                          
    Age_log          Fare_log    
 Min.   :0.3507   Min.   :0.000  
 1st Qu.:3.0504   1st Qu.:2.187  
 Median :3.3673   Median :2.738  
 Mean   :3.2589   Mean   :2.962  
 3rd Qu.:3.6636   3rd Qu.:3.466  
 Max.   :4.3944   Max.   :6.241  
 NA's   :177                     
> 
> quantile(datTrain[,"Age"], na.rm=T, probs=seq(0,1,0.05))
    0%     5%    10%    15%    20%    25%    30%    35%    40%    45%    50% 
 0.420  4.000 14.000 17.000 19.000 20.125 22.000 24.000 25.000 27.000 28.000 
   55%    60%    65%    70%    75%    80%    85%    90%    95%   100% 
30.000 31.800 34.000 36.000 38.000 41.000 45.000 50.000 56.000 80.000 
> 
> quantile(datTrain[,"Age"], na.rm=T, probs=seq(0.95,1,0.005))
    95%   95.5%     96%   96.5%     97%   97.5%     98%   98.5%     99%   99.5% 
56.0000 57.9150 58.0000 60.0000 60.6100 62.0000 62.7400 64.3050 65.8700 70.7175 
   100% 
80.0000 
> 
> # Set plot size into width: 10 and height: 7 (Default: 7)
> options(repr.plot.width=10, repr.plot.height=8)
> 
> ## Reference
> ## Rをノートブック形式で利用する
> ## https://qiita.com/sbtseiji/items/876d2618702416892f7f
> # JupyterのR環境はreprというパッケージを使用しており，そのオプションを設定すればプロットのサイズを変更できるようです。初期値では縦横とも7のサイズになっているので，それぞれ4に変更します。
> 
> p <- ggplot(datTrain, aes(x=Age))
> p <- p + geom_histogram(colour="black", fill="white")
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
Warning message:
Removed 177 rows containing non-finite values (stat_bin). 
> 
> p <- ggplot(datTrain, aes(x=Age_log))
> p <- p + geom_histogram(colour="black", fill="white")
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
Warning message:
Removed 177 rows containing non-finite values (stat_bin). 
> 
> p <- ggplot(datTrain, aes(x=Fare))
> p <- p + geom_histogram(colour="black", fill="white")
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
> 
> p <- ggplot(datTrain, aes(x=Fare_log))
> p <- p + geom_histogram(colour="black", fill="white")
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
> 
> p <- ggplot(datTrain, aes(x=Sex, y=Age, group=Sex))
> p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)
> p <- p + stat_summary(fun.y=mean, geom="point", shape=20, size=3, fill="white", show.legend=FALSE)
Warning message:
`fun.y` is deprecated. Use `fun` instead. 
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
Warning messages:
1: Removed 177 rows containing non-finite values (stat_boxplot). 
2: Removed 177 rows containing non-finite values (stat_summary). 
> 
> p <- ggplot(datTrain, aes(x=Pclass, y=Fare_log, group=Pclass))
> #p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)
> p <- p + geom_boxplot()
> p <- p + stat_summary(fun.y=mean, geom="point", shape=20, size=3, fill="white", show.legend=FALSE)
Warning message:
`fun.y` is deprecated. Use `fun` instead. 
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
> 
> fillFlg_eff <- datTrain[,"Fare_log"]>2.0
> datTrain_eff <- datTrain[fillFlg_eff,]
> 
> p <- ggplot(datTrain_eff, aes(x=Pclass, y=Fare_log, group=Pclass))
> #p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)
> p <- p + geom_boxplot()
> p <- p + stat_summary(fun.y=mean, geom="point", shape=20, size=3, fill="white", show.legend=FALSE)
Warning message:
`fun.y` is deprecated. Use `fun` instead. 
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
> 
> p <- ggplot(datTrain, aes(x=Survived, y=Age, group=Survived))
> #p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)
> p <- p + geom_boxplot()
> p <- p + stat_summary(fun.y=mean, geom="point", shape=20, size=3, fill="white", show.legend=FALSE)
Warning message:
`fun.y` is deprecated. Use `fun` instead. 
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
Warning messages:
1: Removed 177 rows containing non-finite values (stat_boxplot). 
2: Removed 177 rows containing non-finite values (stat_summary). 
> 
> fillFlg_eff <- datTrain[,"Fare_log"]>2.0
> datTrain_eff <- datTrain[fillFlg_eff,]
> 
> p <- ggplot(datTrain_eff, aes(x=Survived, y=Fare_log, group=Survived))
> #p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)
> p <- p + geom_boxplot()
> p <- p + stat_summary(fun.y=mean, geom="point", shape=20, size=3, fill="white", show.legend=FALSE)
Warning message:
`fun.y` is deprecated. Use `fun` instead. 
> p <- p + theme(axis.text.x=element_text(size=14, face="bold"),
+                axis.text.y=element_text(size=14, face="bold"))
> plot(p)
> 
> library(psych)
Error: package or namespace load failed for ‘psych’ in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]):
 there is no package called ‘mnormt’
Execution halted
